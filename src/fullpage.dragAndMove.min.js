"use strict";
/*!
 * fullpage.js Drag And Move Extension 0.1.1
 * for fullpage.js v4
 * https://github.com/alvarotrigo/fullPage.js
 *
 * @license This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distribute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
/* eslint-disable */window.fp_dragAndMoveExtension=function(){var g=this,f=window.fp_utils,t=window.fullpage_api,h=f.$,n=t.getFullpageData(),p=n.options,M=n.internals,r=".fullpage-wrapper",e=".active",b=".fp-section",A=b+e,E=".fp-slide"+e,a=".fp-slides",S=".fp-slidesContainer";g.isGrabbing=!1,g.isAnimating=!1;var l,L,s,o,i,y,T,D,d,u=0,C=null,x=null,c=0,v=0,m=.01,w=.85,F=0,G=0,H=0,B=0,k=0,q=0,z=g.isMouseDown=!1,P=0,O=!1,R=f.css,W=f.trigger,_=f.prev,I=f.next,N=f.closest,Y=M.getMSPointer();function V(){g.isAnimating&&(function(){var n,e;z?(n=M.getDestinationPosition(x),e=F):null!=x&&(n=x.offsetLeft,e=G),$((null!=x?-1*n-e:0)*m),l=z?F<H?"up":H<F?"down":"none":G<B?"left":B<G?"right":"none",g.isGrabbing&&$(z?H-F-c:B-G-v);var t,o,i=z?F:G;!g.isGrabbing&&i<0&&M.scrollHandler(),z?(F+=c*=w,W(y,"onScroll")):G+=v*=w,g.isGrabbing||g.isMouseDown||(t=i,o=z?F:G,Math.round(100*o)==Math.round(100*t)&&u++,2<u&&(g.isAnimating=!1))}(),function(){var n=z?y:h(S,L)[0];if(null!=n)if(p.css3&&(!z||z&&p.autoScrolling&&!p.scrollBar)){var e=z?"translate3d(0px, "+Math.round(F)+"px, 0px)":"translate3d("+Math.round(G)+"px, 0px, 0px)";R(n,M.getTransforms(e))}else p.autoScrolling&&!p.scrollBar&&z?R(n,"top",Math.round(F)):z?window.scrollTo(0,Math.round(-F)):N(n,a).scrollLeft=-1*Math.round(G)}()),o=window.requestAnimFrame(V)}function X(n){var e=n.detail,t=e.value;void 0!==e.directions||(t?g.init():g.destroy())}function $(n){z?c+=n:v+=n}function j(n){if(window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",j),O)O=!1;else{var e=z?f.getWindowHeight():window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth;if((P<30||P<e/2&&!(l===C))&&(x=z?h(A)[0]:h(E,h(A)[0])[0]),!z&&x&&g.isGrabbing&&g.isAnimating){var t=h(a,L)[0];null!=t&&M.landscapeScroll(t,x,C)}if(W(y,"onGrab",!1),g.isGrabbing=!1,g.isMouseDown=!1,!s)if(z){var o={up:null!=_(h(A)[0])?I(x):h(A)[0],down:null!=I(h(A)[0])?_(x):h(A)[0]};if(o[C]){var i=h(E,o[C])[0];"none"!==C&&null!=i&&M.silentLandscapeScroll(i,"internal")}}else M.silentScroll(M.getDestinationPosition(h(A)[0]))}}function J(n){if(u=0,g.isMouseDown=!t.shared.isNormalScrollElement,(new Date).getTime(),M.isReallyTouch(n)){var e=M.getEventsPage(n);T=e.y,D=e.x,k=g.getCurrentScroll(),q=g.getCurrentScrollSlides(n),["touchmove",Y.move].forEach(function(n){window.addEventListener(n,U,{passive:!1})}),window.addEventListener("touchend",j)}}function K(n){y=y||h(r)[0],n.target===h("html")[0]||3==n.which?(O=!0,p.fitToSection=!0):(s=u,u=0,g.isMouseDown=!t.shared.isNormalScrollElement,(new Date).getTime(),T=Q(n,"y"),D=Q(n,"x"),k=g.getCurrentScroll(),q=g.getCurrentScrollSlides(n),U(n)),window.addEventListener("mousemove",U),window.addEventListener("mouseup",j)}function Q(n,e){var t="x"===e;if(M.isTouch&&M.isReallyTouch(n)){var o=M.getEventsPage(n);return t?o.x:o.y}return t?n.pageX:p.scrollBar||!p.autoScrolling?n.screenY:n.pageY}function U(n){var e,t;t=Q(n,"x");var o,i,r,a,l,s=(e=Q(n,"y"))-T,d=t-D;if(!(Math.abs(s)<5&&Math.abs(d)<5||Math.abs(s)<5&&Math.abs(s)>Math.abs(d)||Math.abs(d)<5&&Math.abs(d)>Math.abs(s))){if(g.isMouseDown){if(!g.isGrabbing){z=Math.abs(s)>Math.abs(d),M.removeAnimation(y);var u=h(S,L)[0];null!=u&&M.removeAnimation(u)}W(y,"onGrab",!0),g.isGrabbing=!0}var c=N(n.target,b),v=c?h(E,c)[0]:null,m=h(A)[0],w={up:_(m),down:I(m),left:v?_(v):null,right:v?I(v):null,none:m};g.isGrabbing&&(F=g.getCurrentScroll(),G=g.getCurrentScrollSlides(n),i=t,r=e,a=z?T:D,l=z?r:i,P=Math.abs(a-l),x=null!=(o=x=w[C=l<a?z?"down":"right":a<l?z?"up":"left":"none"])?o:z?h(A)[0]:h(E,L)[0],g.isAnimating="vertical"!==p.dragAndMove&&"horizontal"!==p.dragAndMove||"vertical"===p.dragAndMove&&z||"horizontal"===p.dragAndMove&&!z,g.isAnimating=g.isAnimating&&M.isScrollAllowed.m[C]),H=k+s,B=q+d,g.isAnimating&&f.preventDefault(n)}}function Z(n){var e=n?"addEventListener":"removeEventListener";["touchstart",Y.down].forEach(function(n){y[e](n,M.touchStartHandler)}),["touchmove",Y.move].forEach(function(n){y[e](n,M.touchMoveHandler)})}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){o=window.setTimeout(n,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(n){window.clearTimeout(n)},g.init=function(n){return i=i||f.deepExtend({},p).dragAndMove,p.dragAndMove=i,p.fitToSection=!1,["continuousHorizontal","continuousVertical"].forEach(function(n){p[n]&&(p[n]=!1,f.showError("error","The option `"+n+"` is not compatible with `dragAndDrop`; `"+n+"` desactivated."))}),p.scrollOverflow&&f.showError("warn","The option `scrollOverflow` is not fully compatible with `dragAndDrop`; Scrolling sections/slides will not work when dragging"),"fingersonly"!==p.dragAndMove&&window.addEventListener("mousedown",K),M.container.addEventListener("setAllowScrolling",X),M.container.addEventListener("destroy",g.destroy),V(),g.turnOffTouch(),g},g.turnOffTouch=function(){y=y||h(r)[0],"mouseonly"!==p.dragAndMove&&null!=y&&(Z(!1),"mouseonly"!==p.dragAndMove&&["touchstart",Y.down].forEach(function(n){y.addEventListener(n,J)}))},g.getCurrentScroll=function(){if(!p.css3||!p.autoScrolling||p.scrollBar)return p.autoScrolling&&!p.scrollBar?parseInt(getComputedStyle(y).top):-f.getScrollTop(p);var n=getComputedStyle(y).transform;return void 0!==(n=void 0===n?getComputedStyle(y)["-webkit-transform"]:n)?parseInt(n.split(",")[5]):void 0},g.getCurrentScrollSlides=function(n){var e=N(n.target,b);null==(L=null!=e?e:L)&&(L=h(A)[0]);var t=h(a,L)[0];if(null!=t){var o=h(S,t)[0];if(!p.css3)return-t.scrollLeft;var i=getComputedStyle(o).transform;if(void 0!==(i=void 0===i?h(r).css("-webkit-transform"):i))return"none"===i?0:parseInt(i.split(",")[4])}return 0},g.getDocumentHeight=function(){var t=0,n=h(b),o=n.length;return n.forEach(function(n,e){e!==o&&(t+=n.offsetHeight)}),t},g.destroy=function(){["touchstart",Y.down].forEach(function(n){y.removeEventListener(n,J)}),["touchmove",Y.move].forEach(function(n){y.removeEventListener(n,U,{passive:!1})}),y.removeEventListener("touchend",j),window.removeEventListener("mousedown",K),window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",j),window.cancelAnimFrame(o),o=void 0,Z(!(p.dragAndMove=!1))},g.isScrollingDown_=function(){return!z&&d?d:d="down"===C},g.c=M.c;var nn=g["common".charAt(0)];return"complete"===document.readyState&&nn("dragAndMove"),window.addEventListener("load",function(){nn("dragAndMove")}),g};