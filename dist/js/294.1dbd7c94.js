(self["webpackChunkSalon"]=self["webpackChunkSalon"]||[]).push([[294],{5090:function(e){e.exports=function(){"use strict";var e={612:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function s(e,t,n){return(s=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,{AccountFeaturesPreset:function(){return c},AccountQuotasPreset:function(){return p},ApiError:function(){return w},ApiKeyType:function(){return d},FilesService:function(){return F},FreeTrialPackageId:function(){return f},FreeUploadPlanId:function(){return h},OpenAPI:function(){return A},PaidUploadPlanId:function(){return v},PublicKeyFingerprintHashAlgorithm:function(){return y},TemplateIcon:function(){return m},TransformationCacheStatus:function(){return g},UserRoleType:function(){return b},request:function(){return S}});var c,p,d,f,h,v,y,m,g,b,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t,n,r=(t=i,n=a(),function(){var e,r=u(t);if(n){var i=u(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return o(this,e)});function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t)).url=e.url,n.status=e.status,n.statusText=e.statusText,n.body=e.body,n}return i}(i(Error)),A={BASE:"/",VERSION:"0.1.1259",WITH_CREDENTIALS:!1,TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0};function k(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function x(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function _(e){return null!=e}function P(e){return"string"==typeof e}function E(e){return P(e)&&""!==e}function T(e){return e instanceof Blob}!function(e){e.FREE_TRIAL="freeTrial",e.FREE="free",e.BASIC="basic",e.PRO="pro",e.BUSINESS="business"}(c||(c={})),function(e){e._10="10",e._50="50",e._100="100",e._150="150",e._200="200",e._250="250",e._300="300",e._500="500",e._750="750",e._1024="1024",e.FREE_TRIAL="freeTrial",e.FREE="free"}(p||(p={})),function(e){e.PUBLIC="public",e.SECRET="secret"}(d||(d={})),function(e){e.GB10TRIAL="gb10Trial",e.GB50TRIAL="gb50Trial",e.GB300TRIAL="gb300Trial"}(f||(f={})),function(e){e.GB10TRIAL="gb10Trial",e.GB50TRIAL="gb50Trial",e.GB300TRIAL="gb300Trial"}(h||(h={})),function(e){e.GB10="gb10",e.GB50="gb50",e.GB300="gb300"}(v||(v={})),function(e){e.SHA256="sha256"}(y||(y={})),function(e){e.VIDEO_WATERMARK="VideoWatermark",e.VIDEO_TRIM="VideoTrim",e.VIDEO_TRANSCODE="VideoTranscode",e.VIDEO_THUMBNAILS="VideoThumbnails",e.VIDEO_RESIZE="VideoResize",e.VIDEO_QUALITY="VideoQuality",e.ANTI_VIRUS="AntiVirus",e.ARCHIVE_COMPRESS="ArchiveCompress",e.ARCHIVE_EXTRACT="ArchiveExtract",e.CUSTOM_CODE="CustomCode",e.IMAGE_WATERMARK="ImageWatermark",e.IMAGE_RESIZE="ImageResize",e.IMAGE_CROP="ImageCrop",e.IMAGE_CONVERT="ImageConvert",e.IMAGE_QUALITY="ImageQuality",e.IMAGE_EXIF="ImageExif"}(m||(m={})),function(e){e.OK="ok",e.DELETING="deleting"}(g||(g={})),function(e){e.ACCOUNT_ADMIN="AccountAdmin",e.ACCOUNT_OBSERVER="AccountObserver",e.SYSTEM_ADMIN="SystemAdmin",e.SYSTEM_OBSERVER="SystemObserver"}(b||(b={}));var S=k((function(e){var t=function(e){var t,n,r=e.path.replace(/[:]/g,"_"),o="".concat(A.BASE).concat(r);return e.query?"".concat(o).concat((t=e.query,n=[],Object.keys(t).forEach((function(e){var r=t[e];_(r)&&(Array.isArray(r)?r.forEach((function(t){n.push("".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(String(t))))})):n.push("".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(String(r)))))})),n.length>0?"?".concat(n.join("&")):"")):o}(e);return x(I(e,t),(function(n){var r,o=function(e){try{var t=e.getResponseHeader("Content-Type");if(t)return t.toLowerCase().startsWith("application/json")?JSON.parse(e.responseText):e.responseText}catch(e){console.error(e)}return null}(n),i=function(e,t){if(t){var n=e.getResponseHeader(t);if(P(n))return n}return null}(n,e.responseHeader),s={url:t,ok:(r=n.status,r>=200&&r<300),status:n.status,statusText:n.statusText,body:i||o};return function(e,t){var n=Object.assign({400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"},e.errors)[t.status];if(n)throw new w(t,n);if(!t.ok)throw new w(t,"Generic Error")}(e,s),s}))})),I=k((function(e,t){var n=new XMLHttpRequest;return n.open(e.method,t,!0),n.withCredentials=A.WITH_CREDENTIALS,x(O(e),(function(t){return t.forEach((function(e,t){n.setRequestHeader(t,e)})),new Promise((function(t){n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&t(n)},n.send(function(e){return e.formData?(t=e.formData,n=new FormData,Object.keys(t).forEach((function(e){var r=t[e];_(r)&&n.append(e,r)})),n):e.body?P(e.body)||T(e.body)?e.body:JSON.stringify(e.body):void 0;var t,n}(e))}))}))})),O=k((function(e){return x(j(e,A.TOKEN),(function(t){return x(j(e,A.USERNAME),(function(n){return x(j(e,A.PASSWORD),(function(r){return x(j(e,A.HEADERS),(function(o){var i=new Headers(Object.assign(Object.assign({Accept:"application/json"},o),e.headers));if(E(t)&&i.append("Authorization","Bearer ".concat(t)),E(n)&&E(r)){var s=btoa("".concat(n,":").concat(r));i.append("Authorization","Basic ".concat(s))}return e.body&&(T(e.body)?i.append("Content-Type",e.body.type||"application/octet-stream"):P(e.body)?i.append("Content-Type","text/plain"):i.append("Content-Type","application/json")),i}))}))}))}))})),j=k((function(e,t){return"function"==typeof t?t(e):t}));function R(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"beginMultipartUpload",value:function(e){try{return R(S({method:"POST",path:"/v1/files",body:e,errors:{401:"Unauthenticated."}}),(function(e){return e.body}))}catch(e){return Promise.reject(e)}}},{key:"completeUploadPart",value:function(e,t,n){try{return R(S({method:"PUT",path:"/v1/files/".concat(e,"/upload_parts/").concat(t),body:n,errors:{401:"Unauthenticated.",403:"Unauthorized.",404:"File or upload part not found."}}),(function(e){return e.body}))}catch(e){return Promise.reject(e)}}},{key:"getUploadPart",value:function(e,t){try{return R(S({method:"GET",path:"/v1/files/".concat(e,"/upload_parts/").concat(t),errors:{401:"Unauthenticated.",403:"Unauthorized.",404:"File or upload part not found."}}),(function(e){return e.body}))}catch(e){return Promise.reject(e)}}},{key:"getUploadParts",value:function(e){try{return R(S({method:"GET",path:"/v1/files/".concat(e,"/upload_parts"),errors:{401:"Unauthenticated.",403:"Unauthorized.",404:"File not found."}}),(function(e){return e.body}))}catch(e){return Promise.reject(e)}}}],n&&U(t,n),e}()}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}return n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(612)}()},2493:function(e){e.exports=function(){"use strict";var e={881:function(e,t,n){function r(e){var t,n,r,o=null!==(t=e.minDelayUntilFirstValue)&&void 0!==t?t:0,i=null!==(n=e.teardownTime)&&void 0!==n?n:0,s=e.valueIncreaseRatePerSecond,a=e.averageTimeBetweenValues,l=e.maxValue,u=e.valueIncreaseDelta,c=Date.now(),p=0,d=0;function f(e){return e.value===l}function h(e,t,n){var r=function(e,t){return 1-Math.exp(-(e-t)/(3.5*a))}(t,n);return r*e+(1-r)*d}function v(e){return t=null!=e?e:Date.now(),(n=void 0!==r?function(e,t){if(f(e)){var n=Math.max(1e3,i),r=(t-e.time)/n,o=(a=Math.min(1,r))*a,s=e.value-d;return d+s*o}var a;return h(e.value,t,c)}(r,t):function(e){var t=Math.min(u,.33*l),n=(e-c)/(o+t/s*1e3);return Math.min(1,n)*t}(t))>p&&(p=n),p;var t,n}return{setValue:function(e,t){if(void 0!==r){if(f(r))return;d=h(r.value,r.time,c),c=r.time}r={time:null!=t?t:Date.now(),value:Math.min(e,l)}},smoothedValue:v,smoothedFactor:function(e){return v(e)/l}}}n.r(t),n.d(t,{ProgressSmoother:function(){return r}})}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}return n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(881)}()},3502:function(e,t,n){e.exports=function(){"use strict";var e={805:function(e,t,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function l(e,t,n){return(l=u()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&c(o,n.prototype),o}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t),r.d(t,{Upload:function(){return W},UploadError:function(){return I}});var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(a,e);var t,n,r,o=(t=a,n=u(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return i(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=o.call(this,e),Object.setPrototypeOf(s(t),a.prototype),t}return r=a,Object.defineProperty(r,"prototype",{writable:!1}),r}(a(Error)),f=n(5090);function h(){}function v(e,t,n){if(!e.s){if(n instanceof y){if(!n.s)return void(n.o=v.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(v.bind(null,e,t),v.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var y=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,o=this.s;if(o){var i=1&o?t:n;if(i){try{v(r,1,i(this.v))}catch(e){v(r,2,e)}return r}return this}return this.o=function(e){try{var o=e.v;1&e.s?v(r,1,t?t(o):o):n?v(r,1,n(o)):v(r,2,o)}catch(e){v(r,2,e)}},r},e}();function m(e){return e instanceof y&&1&e.s}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b,w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mutex=void 0,this.resolver=void 0}var t,n;return t=e,(n=[{key:"safe",value:function(e){try{var t=this;return n=t.acquire(),r=function(){return function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(e,(function(e,n){return t.release(),function(e,t){if(e)throw t;return t}(e,n)}))},n&&n.then||(n=Promise.resolve(n)),r?n.then(r):n}catch(e){return Promise.reject(e)}var n,r}},{key:"acquire",value:function(){try{var e=this;return t=function(e,t,n){for(var r;;){var o=e();if(m(o)&&(o=o.v),!o)return s;if(o.then){r=0;break}var i,s=n();if(s&&s.then){if(!m(s)){r=1;break}s=s.s}}var a=new y,l=v.bind(null,a,2);return(0===r?o.then(c):1===r?s.then(u):i.then(p)).then(void 0,l),a;function u(t){s=t;do{if(!(o=e())||m(o)&&!o.v)return void v(a,1,s);if(o.then)return void o.then(c).then(void 0,l);m(s=n())&&(s=s.v)}while(!s||!s.then);s.then(u).then(void 0,l)}function c(e){e?(s=n())&&s.then?s.then(u).then(void 0,l):u(s):v(a,1,s)}function p(){(o=e())?o.then?o.then(c).then(void 0,l):c(o):v(a,1,s)}}((function(){return void 0!==e.mutex}),0,(function(){return function(e,t){return e&&e.then?e.then(h):Promise.resolve()}(e.mutex)})),n=function(){e.mutex=new Promise((function(t){e.resolver=t}))},t&&t.then?t.then(n):n()}catch(e){return Promise.reject(e)}var t,n}},{key:"release",value:function(){if(void 0===this.resolver)throw new Error("Unable to release mutex: already released.");this.resolver(),this.resolver=void 0,this.mutex=void 0}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e){e.is=function(e){return void 0!==e.slice}}(b||(b={}));var A=n(2493);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){var t="function"==typeof Map?new Map:void 0;return(_=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return P(e,arguments,S(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),T(r,e)})(e)}function P(e,t,n){return(P=E()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&T(o,n.prototype),o}).apply(null,arguments)}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(i,e);var t,n,r,o=(t=i,n=E(),function(){var e,r=S(t);if(n){var o=S(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return x(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e.error.message)).errorCode=e.error.code,t.details=e.error.details,t}return r=i,Object.defineProperty(r,"prototype",{writable:!1}),r}(_(Error));function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(){}function R(e,t){if(!t)return e&&e.then?e.then(j):Promise.resolve()}function U(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function F(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function C(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function D(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}function M(e,t){if(e)throw t;return t}function L(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=function(){function e(t){var n,r,o,i,s,a,l,u,c;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.accountIdLength=7,this.specialApiKeyAccountId="W142hJk",this.specialApiKeys=["free","demo"],this.apiKeyPrefix="public_",this.maxUploadConcurrency=5,this.refreshBeforeExpirySeconds=20,this.onProgressInterval=100,this.retryAuthAfterErrorSeconds=5,this.accessTokenPathBase="/api/v1/access_tokens/",this.authMutex=new w,this.lastAuthSession=void 0,void 0===(null!=t?t:void 0))throw new Error("[upload-js] Please provide a configuration object to the constructor.");if(!0===t.debug&&console.log("[upload-js] Initialized with API key '".concat(t.apiKey,"'")),this.apiUrl=null!==(r=null===(n=t.internal)||void 0===n?void 0:n.apiUrl)&&void 0!==r?r:"https://api.upload.io",this.cdnUrl=null!==(i=null===(o=t.internal)||void 0===o?void 0:o.cdnUrl)&&void 0!==i?i:"https://upcdn.io",this.authenticateWithApiKey=null===(a=null===(s=t.internal)||void 0===s?void 0:s.authenticateWithApiKey)||void 0===a||a,this.headers=null===(l=t.internal)||void 0===l?void 0:l.headers,this.debugMode=!0===t.debug,void 0===(null!==(u=t.apiKey)&&void 0!==u?u:void 0))throw new Error("[upload-js] Please provide an API key via the 'apiKey' config parameter.");if(t.apiKey.trim()!==t.apiKey)throw new Error("[upload-js] Please enter a valid API key: whitespace was detected in your API key, please remove it and try again.");if(!1===(null===(c=t.internal)||void 0===c?void 0:c.authenticateWithApiKey))this.accountId=t.internal.accountId;else if(this.specialApiKeys.includes(t.apiKey))this.accountId=this.specialApiKeyAccountId;else{if(!t.apiKey.startsWith(this.apiKeyPrefix))throw new Error('[upload-js] Please enter a valid API key: it must begin with "'.concat(this.apiKeyPrefix,'".'));if(this.accountId=t.apiKey.substr(this.apiKeyPrefix.length,this.accountIdLength),this.accountId.length!==this.accountIdLength)throw new Error("[upload-js] Please enter a valid API key: it must be at least ".concat(this.apiKeyPrefix.length+this.accountIdLength," characters long, but the API key you provided is ").concat(this.apiKeyPrefix.length+this.accountId.length,"."))}}var t,n;return t=e,(n=[{key:"beginAuthSession",value:function(e,t){try{var n=this;return U(n.endAuthSession(),(function(){var r={accessToken:void 0,accessTokenRefreshHandle:void 0,isActive:!0};return n.lastAuthSession=r,R(n.refreshAccessToken(e,t,r))}))}catch(e){return Promise.reject(e)}}},{key:"endAuthSession",value:function(){try{var e=this;return R(e.authMutex.safe(F((function(){if(void 0!==e.lastAuthSession){var t=e.lastAuthSession;return e.lastAuthSession=void 0,void 0!==t.accessTokenRefreshHandle&&clearTimeout(t.accessTokenRefreshHandle),t.isActive=!1,R(e.deleteAccessToken())}}))))}catch(e){return Promise.reject(e)}}},{key:"createFileInputHandler",value:function(e){var t=this;return function(n){var r=n.target;if(void 0===r.files||null===r.files)throw new Error("No property 'files' on input element: ensure 'createFileInputHandler' is set to the 'onchange' attribute on an input of type 'file'.");if(void 0===r.files[0])throw new Error("No file selected.");t.uploadFile(Object.assign(Object.assign({},e),{file:r.files[0]})).then(e.onUploaded,(function(t){void 0!==e.onError?e.onError(t):console.error("Cannot upload file. To remove this console message, handle the error explicitly by providing an 'onError' parameter: upload.createFileInputHandler({onUploaded, onError})",t)}))}}},{key:"uploadFile",value:function(e){try{var t,n=this,r=[],o=function(e){r.push(e)},i=function(){return r.forEach((function(e){return e()}))},s=b.is(e)?{file:e}:e;return void 0!==s.onBegin&&s.onBegin({cancel:i}),C((function(){return U(n.beginFileUpload(s.file,s,o))}),(function(e){if(i(),e instanceof f.ApiError){var n=e.body;if("string"==typeof(null===(t=null==n?void 0:n.error)||void 0===t?void 0:t.code))throw new I(n)}throw e}))}catch(e){return Promise.reject(e)}}},{key:"url",value:function(e,t){var n="".concat(this.cdnUrl,"/").concat(e);return void 0===t?n:"".concat(n,"/").concat(t)}},{key:"withProgressReporting",value:function(e,t,n){try{var r,o=new Promise((function(e){r=e})),i=!0,s=function(){i&&(r(),clearInterval(a),i=!1)},a=setInterval((function(){return t(s)}),e);return L((function(){return D(n,(function(e){return U(o,(function(){return e}))}))}),(function(e,t){return s(),M(e,t)}))}catch(e){return Promise.reject(e)}}},{key:"beginFileUpload",value:function(e,t,n){try{var r=this,o=(0,A.ProgressSmoother)({maxValue:e.size,teardownTime:1e3,minDelayUntilFirstValue:2e3,valueIncreaseDelta:204800,valueIncreaseRatePerSecond:51200,averageTimeBetweenValues:1e3});return U(r.withProgressReporting(r.onProgressInterval,(function(n){if(void 0===t.onProgress)n();else{var r=o.smoothedValue(),i=e.size;r===i&&n(),t.onProgress({bytesSent:r,bytesTotal:i,progress:Math.round(r/i*100)})}}),F((function(){var i,s={accountId:r.accountId,fileSize:e.size,fileName:e.name,mime:r.normalizeMimeType(e.type),tags:(null!==(i=t.tags)&&void 0!==i?i:[]).map((function(e){return"string"==typeof e?{name:e,searchable:!0}:e}))};return r.debug("Initiating file upload. Params = ".concat(JSON.stringify(s))),r.preflight(),U(f.FilesService.beginMultipartUpload(s),(function(t){var i=t.uploadParts.count>1;r.debug("Initiated file upload. Metadata = ".concat(JSON.stringify(t)));var a,l,u=(a=0,function(){if(a!==t.uploadParts.count-1)return++a}),c=[t.uploadParts.first],p=F((function(e){var n=c.pop();if(void 0!==n)return r.debug("Dequeued part ".concat(n.uploadPartIndex,"."),e),n;var o=u();if(void 0!==o)return r.preflight(),r.debug("Fetching metadata for part ".concat(o,"."),e),f.FilesService.getUploadPart(t.file.fileId,o);r.debug("No parts remaining.",e)})),d=[],h=function s(a){return U(p(a),(function(l){return function(u){var c=function(){if(void 0!==l){var u=0;return U(r.uploadPart(e,t.file,i,l,(function(e){var t=e.bytesSent;void 0===d[a]?d[a]=t:(d[a]-=u,d[a]+=t),u=t;var n=d.reduce((function(e,t){return e+t}));o.setValue(n)}),n,a),(function(){return R(s(a))}))}}();if(c&&c.then)return c.then(j)}()}))};return U(Promise.all((l=Array(r.maxUploadConcurrency).keys(),function(e){if(Array.isArray(e))return O(e)}(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){return U(h(e))}))),(function(){var n={accountId:s.accountId,file:e,fileId:t.file.fileId,fileSize:t.file.size,fileUrl:r.url(t.file.fileId),tags:t.file.tags,mime:t.file.mime,suggestedOptimization:void 0===t.suggestedOptimizationUrlSlug?void 0:{transformationSlug:t.suggestedOptimizationUrlSlug,transformationUrl:r.url(t.file.fileId,t.suggestedOptimizationUrlSlug)}};return r.debug("FileLike upload completed. FileLike = ".concat(JSON.stringify(n))),n}))}))}))))}catch(e){return Promise.reject(e)}}},{key:"debug",value:function(e,t){this.debugMode&&console.log("[upload-js] ".concat(e).concat(void 0!==t?" (Worker ".concat(t,")"):""))}},{key:"error",value:function(e){console.error("[upload-js] ".concat(e))}},{key:"normalizeMimeType",value:function(e){var t=e.toLowerCase();return/^[a-z0-9]+\/[a-z0-9+\-._]+$/.test(t)?t:void 0}},{key:"preflight",value:function(){var e,t=this;f.OpenAPI.BASE=this.apiUrl,this.authenticateWithApiKey?(f.OpenAPI.WITH_CREDENTIALS=!0,f.OpenAPI.USERNAME="apikey",f.OpenAPI.PASSWORD=this.config.apiKey):(f.OpenAPI.WITH_CREDENTIALS=!1,delete f.OpenAPI.USERNAME,delete f.OpenAPI.PASSWORD);var n=this.headers,r=null===(e=this.lastAuthSession)||void 0===e?void 0:e.accessToken;void 0!==n||void 0!==r?f.OpenAPI.HEADERS=F((function(){var e;return U(void 0===n?{}:n(),(function(n){var r=null===(e=t.lastAuthSession)||void 0===e?void 0:e.accessToken;return Object.assign(Object.assign({},n),void 0===r?{}:{"authorization-user":r})}),void 0===n)})):delete f.OpenAPI.HEADERS}},{key:"preflightExternalApi",value:function(e,t){f.OpenAPI.BASE=e,f.OpenAPI.WITH_CREDENTIALS=t,delete f.OpenAPI.USERNAME,delete f.OpenAPI.PASSWORD,delete f.OpenAPI.HEADERS}},{key:"putUploadPart",value:function(e,t,n,r,o,i){try{var s=new XMLHttpRequest,a=!0;return i((function(){a&&s.abort()})),L((function(){return U(new Promise((function(i,a){s.upload.addEventListener("progress",(function(e){e.lengthComputable&&o({bytesSent:e.loaded,bytesTotal:e.total})}),!1),s.addEventListener("load",(function(){if(o({bytesSent:r.size,bytesTotal:r.size}),2===Math.floor(s.status/100)){var e=s.getResponseHeader("etag");null==e?a(new Error("FileLike upload error: no etag header in upload response.")):i({etag:e})}else a(new Error("FileLike upload error: status code ".concat(s.status)))})),s.onabort=function(){return a(new d("FileLike upload cancelled."))},s.onerror=function(){return a(new Error("FileLike upload error."))},s.ontimeout=function(){return a(new Error("FileLike upload timeout."))},s.open("PUT",e),n||(s.setRequestHeader("content-type",t.mime),null!==t.name&&s.setRequestHeader("content-disposition",'inline; filename="'.concat(encodeURIComponent(t.name),"\"; filename*=UTF-8''").concat(encodeURIComponent(t.name)))),s.send(r)})))}),(function(e,t){return a=!1,M(e,t)}))}catch(e){return Promise.reject(e)}}},{key:"uploadPart",value:function(e,t,n,r,o,i,s){try{var a=this,l=-1===r.range.inclusiveEnd?new Blob:e.slice(r.range.inclusiveStart,r.range.inclusiveEnd+1);return a.debug("Uploading part ".concat(r.uploadPartIndex,"."),s),U(a.putUploadPart(r.uploadUrl,t,n,l,o,i),(function(e){var t=e.etag;return a.preflight(),U(f.FilesService.completeUploadPart(r.fileId,r.uploadPartIndex,{etag:t}),(function(){a.debug("Uploaded part ".concat(r.uploadPartIndex,"."),s)}))}))}catch(e){return Promise.reject(e)}}},{key:"accessTokenPath",value:function(){return"".concat(this.cdnUrl).concat(this.accessTokenPathBase).concat(this.accountId)}},{key:"deleteAccessToken",value:function(){try{return R(this.deleteNoResponse(this.accessTokenPath(),{},!0))}catch(e){return Promise.reject(e)}}},{key:"refreshAccessToken",value:function(e,t,n){try{var r=this;return function(e){if(e&&e.then)return e.then(j)}(C((function(){return R(r.authMutex.safe(F((function(){if(n.isActive){var o=r.getText;return D(t,(function(i){return U(o.call(r,e,i),(function(o){var i=r.handleApiError;return U(r.putJsonGetJson(r.accessTokenPath(),{},{accessToken:o},!0),(function(o){var s=i.call(r,o);n.accessToken=s.accessToken,n.accessTokenRefreshHandle=window.setTimeout((function(){r.refreshAccessToken(e,t,n).then((function(){}),(function(e){return r.error("Permanent error when refreshing access token: ".concat(e))}))}),Math.max(0,1e3*(s.ttlSeconds-r.refreshBeforeExpirySeconds)))}))}))}))}}))))}),(function(o){return r.debug("Error when refreshing access token: ".concat(o)),U(new Promise((function(e){return setTimeout(e,1e3*r.retryAuthAfterErrorSeconds)})),(function(){return R(r.refreshAccessToken(e,t,n))}))})))}catch(e){return Promise.reject(e)}}},{key:"putJsonGetJson",value:function(e,t,n,r){try{return U(this.nonUploadApiRequest({method:"PUT",path:e,headers:t,body:n},r),(function(e){return e.body}))}catch(e){return Promise.reject(e)}}},{key:"getText",value:function(e,t){try{return U(this.nonUploadApiRequest({method:"GET",path:e,headers:t},!1),(function(e){return e.body}))}catch(e){return Promise.reject(e)}}},{key:"deleteNoResponse",value:function(e,t,n){try{return R(this.nonUploadApiRequest({method:"DELETE",path:e,headers:t},n))}catch(e){return Promise.reject(e)}}},{key:"handleApiError",value:function(e){var t=e;if(void 0!==t.error)throw new Error("[upload-js] ".concat(t.error.message,". (Code: ").concat(t.error.code,")"));return e}},{key:"nonUploadApiRequest",value:function(e,t){try{return this.preflightExternalApi(e.path,t),U((0,f.request)(Object.assign(Object.assign({},e),{path:""})))}catch(e){return Promise.reject(e)}}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(805)}()},5820:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(6252);const o={class:"h-screen flex px-3 overflow-scroll"};function i(e,t){return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.WI)(e.$slots,"default")])}var s=n(3744);const a={},l=(0,s.Z)(a,[["render",i]]);var u=l},6988:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(6252),o=n(3577);const i={class:"text-xs"};function s(e,t,n,s,a,l){const u=(0,r.up)("vue-countdown");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(u,{time:this.time},{default:(0,r.w5)((({days:e,hours:t,minutes:n,seconds:i})=>[(0,r.Uk)(" Time Remaining："+(0,o.zw)(e)+" days, "+(0,o.zw)(t)+" hours, "+(0,o.zw)(n)+" minutes, "+(0,o.zw)(i)+" seconds. ",1)])),_:1},8,["time"])])}var a={props:["start"],computed:{startDate(){return new Date(this.start)},endDate(){const e=new Date;return e.setDate(this.startDate.getDate()+4),e},time(){var e=new Date;return this.endDate.getTime()-e.getTime()}}},l=n(3744);const u=(0,l.Z)(a,[["render",s]]);var c=u},4798:function(e,t,n){"use strict";n.d(t,{Z:function(){return ae}});var r=n(6252),o=n(9963);const i={class:"section"};function s(e,t,n,s,a,l){const u=(0,r.up)("AppLoader"),c=(0,r.up)("FormIntro"),p=(0,r.up)("FormField"),d=(0,r.up)("full-page");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.wy)((0,r.Wm)(u,null,null,512),[[o.F8,a.processing]]),a.ready?(0,r.wy)(((0,r.wg)(),(0,r.j4)(d,{key:0,ref:"fullpage",options:a.options,class:"pr-16"},{default:(0,r.w5)((()=>[(0,r._)("div",i,[(0,r.Wm)(c,{name:a.name,description:a.description,onReady:l.next},null,8,["name","description","onReady"])]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.fields,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:"section"},[(0,r.Wm)(p,{field:e,onReady:l.next,index:t,modelValue:a.form[e.id],"onUpdate:modelValue":t=>a.form[e.id]=t},null,8,["field","onReady","index","modelValue","onUpdate:modelValue"])])))),128))])),_:1},8,["options"])),[[o.F8,!a.processing]]):(0,r.kq)("",!0)],64)}var a=n(9669),l=n.n(a);const u={class:"grid grid-cols-12 px-3 mr-5 sm:mr-24"};function c(e,t,n,o,i,s){const a=(0,r.up)("InputChoice"),l=(0,r.up)("InputUpload"),c=(0,r.up)("InputText");return(0,r.wg)(),(0,r.iD)("div",u,[s.getChoice?((0,r.wg)(),(0,r.j4)(a,{key:0,class:"app-frame",count:n.index+1,title:s.getTitle,choices:s.getChoice,required:!0,help:s.getHelpText,onUpdate:s.updateValue,onReady:t[0]||(t[0]=t=>e.$emit("ready"))},null,8,["count","title","choices","help","onUpdate"])):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[s.isUpload?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"app-frame",count:n.index+1,title:s.getTitle,required:!0,help:s.getHelpText,onUpdate:s.updateValue,onReady:t[1]||(t[1]=t=>e.$emit("ready"))},null,8,["count","title","help","onUpdate"])):((0,r.wg)(),(0,r.j4)(c,{key:1,class:"app-frame",count:n.index+1,title:s.getTitle,required:!0,help:s.getHelpText,onUpdate:s.updateValue,onReady:t[2]||(t[2]=t=>e.$emit("ready"))},null,8,["count","title","help","onUpdate"]))],64))])}var p=n(3577);function d(e,t,n,i,s,a){const l=(0,r.up)("FormLabel"),u=(0,r.up)("FormHelp"),c=(0,r.up)("FormButtonOk");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l,{count:n.count,required:n.required},{default:(0,r.w5)((()=>[(0,r.Uk)((0,p.zw)(n.title),1)])),_:1},8,["count","required"]),n.help?((0,r.wg)(),(0,r.j4)(u,{key:0,help:n.help},null,8,["help"])):(0,r.kq)("",!0),(0,r.wy)((0,r._)("input",{type:"text",class:"font-haffer text-xl sm:ml-0 bg-transparent block border-b border-black w-full text-black py-3 outline-none placeholder-opb",placeholder:"...",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),onInput:t[1]||(t[1]=t=>e.$emit("update",s.value)),onKeyup:t[2]||(t[2]=(0,o.D2)((t=>e.$emit("ready")),["enter"])),autocomplete:"off"},null,544),[[o.nr,s.value]]),(0,r.Wm)(c,{onReady:t[3]||(t[3]=t=>e.$emit("ready"))})])}var f=n(688);const h=["innerHTML"];function v(e,t,n,o,i,s){return(0,r.wg)(),(0,r.iD)("div",{class:"mb-5",innerHTML:n.help},null,8,h)}var y={props:["help"]},m=n(3744);const g=(0,m.Z)(y,[["render",v]]);var b=g,w=n(4702),A={components:{FormLabel:f.Z,FormButtonOk:w.Z,FormHelp:b},props:["count","title","required","placeholder","help"],emits:["ready"],data(){return{value:""}}};const k=(0,m.Z)(A,[["render",d]]);var x=k;const _={class:"grid grid-cols-12 gap-2 sm:ml-0 font-haffer"},P=["onClick"],E={class:"w-6 h-6 flex items-center justify-center"},T={class:"text-left text-sm sm:text-md"};function S(e,t,n,o,i,s){const a=(0,r.up)("FormLabel"),l=(0,r.up)("FormHelp"),u=(0,r.up)("FormButtonOk");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(a,{count:n.count,required:n.required},{default:(0,r.w5)((()=>[(0,r.Uk)((0,p.zw)(n.title),1)])),_:1},8,["count","required"]),n.help?((0,r.wg)(),(0,r.j4)(l,{key:0,help:n.help},null,8,["help"])):(0,r.kq)("",!0),(0,r._)("div",_,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.choices,((t,o)=>((0,r.wg)(),(0,r.iD)("button",{class:(0,p.C_)([{"ring-1 ring-black":i.selectedIndex==o},"group flex col-span-12 items-center justify-start p-2 border border-black rounded hover:ring-1 ring-black"]),key:o,onClick:t=>{i.selectedIndex=o,e.$emit("update",n.choices[i.selectedIndex]),e.$emit("ready")}},[(0,r._)("span",{class:(0,p.C_)([{"bg-black text-white":i.selectedIndex==o,"bg-white text-black ":i.selectedIndex!=o},"flex border border-black rounded items-center justify-center text-xs sm:text-sm mr-2"])},[(0,r._)("span",E,(0,p.zw)(s.getSymbol(o)),1)],2),(0,r._)("span",T,(0,p.zw)(t),1)],10,P)))),128))]),(0,r.Wm)(u,{onReady:t[0]||(t[0]=t=>e.$emit("ready"))})])}var I={components:{FormLabel:f.Z,FormButtonOk:w.Z,FormHelp:b},props:["count","title","required","choices","help"],emits:["ready"],data(){return{selectedIndex:null}},methods:{getSymbol(e){var t=["A","B","C"];return t[e]}}};const O=(0,m.Z)(I,[["render",S]]);var j=O;const R={class:""},U={class:"ml-10 sm:ml-0 font-haffer"};function F(e,t,n,i,s,a){const l=(0,r.up)("FormLabel"),u=(0,r.up)("FormHelp"),c=(0,r.up)("FormButtonOk");return(0,r.wg)(),(0,r.iD)("div",R,[(0,r.Wm)(l,{count:n.count,required:n.required},{default:(0,r.w5)((()=>[(0,r.Uk)((0,p.zw)(n.title),1)])),_:1},8,["count","required"]),n.help?((0,r.wg)(),(0,r.j4)(u,{key:0,help:n.help},null,8,["help"])):(0,r.kq)("",!0),(0,r.wy)((0,r._)("input",{type:"file",ref:"file",onChange:t[0]||(t[0]=(...e)=>a.execute&&a.execute(...e)),class:"sm:ml-0 font-haffer"},null,544),[[o.F8,!s.progress]]),(0,r.wy)((0,r._)("div",{class:"bg-black h-4 ml-10 sm:ml-0",style:(0,p.j5)({width:s.progress+"%"})},null,4),[[o.F8,s.progress]]),(0,r.wy)((0,r._)("span",U,[(0,r.Uk)((0,p.zw)(s.progress)+"% ",1),(0,r.wy)((0,r._)("span",null,"Uploading...",512),[[o.F8,100!=s.progress]]),(0,r.wy)((0,r._)("span",null,"Complete!",512),[[o.F8,100==s.progress]])],512),[[o.F8,0!=s.progress]]),(0,r.Wm)(c,{onReady:t[1]||(t[1]=t=>e.$emit("ready"))})])}var C=n(3502),D={components:{FormLabel:f.Z,FormButtonOk:w.Z,FormHelp:b},props:["count","title","required","help"],emits:["ready"],data(){return{upload:{},progress:0}},methods:{async execute(){console.log("Begin upload!"),this.uploading=!0;var e=this.$refs.file.files[0];const{fileUrl:t,fileId:n}=await this.upload.uploadFile({file:e,onProgress:({bytesSent:e,bytesTotal:t})=>{console.log(`${Math.round(e/t*100)}% complete`),this.progress=Math.round(e/t*100)}});console.log(t,n),this.$emit("update",t),this.$emit("ready")}},mounted(){this.upload=new C.Upload({apiKey:"public_12a1xmB3sgHFxd1HZqjm5Kh2y1zd"})}};const M=(0,m.Z)(D,[["render",F]]);var L=M,B={components:{InputText:x,InputChoice:j,InputUpload:L},props:["modelValue","field","index"],computed:{getChoice(){var e=this.field.validations.filter((function(e){return"in"in e}));return!!e.length&&e[0].in},getTitle(){var e=this.field.validations.filter((function(e){return"prohibitRegexp"in e}));return e.length?e[0].prohibitRegexp.pattern:"No Title"},getHelpText(){var e=this.field.validations.filter((function(e){return"prohibitRegexp"in e}));return!!e.length&&e[0].message},isUpload(){var e=this.field.id.split("0");return e.includes("upload")}},methods:{updateValue(e){this.$emit("update:modelValue",e)},helpText(e){var t=null;switch(e){case"uploadTaxForms0upload":t='Forms can be downloaded <a class="underline" href="#">here</a>. Please use the W9 form if you are a US investor, or the appropriate W8 form if you are a foreign investor.';break;case"downloadAndReviewSalonsOperatingAgreement":t="Download Salon's Operating Agreement <a class='underline' href='#'>here</a>";break;case"executeAndUploadSalonsSubscriptionAgreement0upload":t='Download the Subscription Agreement <a class="underline" href="#">here</a>';break}return t}}};const W=(0,m.Z)(B,[["render",c]]);var z=W;const q={class:"grid grid-cols-12 px-3"},H={class:"app-frame"},Z={class:"sm:ml-0"},N={class:"app-text mb-2 font-haffer font-bold"},V={class:"font-haffer"};function $(e,t,n,o,i,s){const a=(0,r.up)("FormButtonBegin");return(0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("div",H,[(0,r._)("div",Z,[(0,r._)("p",N,(0,p.zw)(n.name),1),(0,r._)("p",V,(0,p.zw)(n.description),1),(0,r.Wm)(a,{onReady:t[0]||(t[0]=t=>e.$emit("ready"))})])])])}const K={class:"flex mt-4 items-center"},G=(0,r.Uk)(" Begin ");function J(e,t,n,o,i,s){const a=(0,r.up)("AppButton");return(0,r.wg)(),(0,r.iD)("div",K,[(0,r.Wm)(a,{onClick:t[0]||(t[0]=t=>e.$emit("ready")),class:"flex items-center"},{default:(0,r.w5)((()=>[G])),_:1})])}var Y=n(7175),Q={components:{AppButton:Y.Z}};const X=(0,m.Z)(Q,[["render",J]]);var ee=X,te={components:{FormButtonBegin:ee},props:["name","description"]};const ne=(0,m.Z)(te,[["render",$]]);var re=ne,oe=n(1245),ie={components:{FormField:z,AppLoader:oe.Z,FormIntro:re},props:["url"],emits:["success","ready"],data(){return{name:"",description:"",ready:!1,processing:!0,btnTxt:"Submit",fields:[],form:{},sending:!1,options:{licenseKey:"K9EP6-N164H-2BKM8-MJLGI-KSURM",controlArrows:!0,scrollBar:!1,scrollingSpeed:500,navigation:!0,navigationPosition:"right"}}},computed:{profile(){return this.$store.state.profile}},methods:{async next(){await this.validate()?this.submitForm():console.log("next")},async validate(){console.log("validate form!");var e=0,t=!1;for(let n of this.fields){if(""==this.form[n.id]&&(t=!0),[n.id]in this.form||(t=!0),t){this.$refs.fullpage.api.moveTo(e+2);break}e++}return console.log("error is",t),!t},async submitForm(){this.processing=!0,console.log("Ran Submit!");try{this.form.profile=this.profile;const e=await l().post(this.url,this.form);e.data.result?(console.log("success",e.data),this.$emit("success"),this.$store.dispatch("connect")):(alert("Error, Please try again."),this.processing=!1,console.log("error",e.data))}catch(e){this.processing=!1,console.log("error",e)}},async resize(){this.$refs.fullpage.api.reBuild()}},mounted(){console.log("mounted!")},beforeUnmount(){window.removeEventListener("resize",this.resize)},async beforeMount(){try{const e=await l().get(this.url);console.log("form",e.data),this.name=e.data.name,this.description=e.data.description,this.fields=e.data.fields.filter((function(e){var t=["votes","kycApproved","units","onboardProposal","profile"];return!t.includes(e.id)})),this.$emit("ready"),this.ready=!0,this.processing=!1,window.addEventListener("resize",this.resize)}catch(e){console.log("error",e)}}};const se=(0,m.Z)(ie,[["render",s]]);var ae=se},1245:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(6252);const o=e=>((0,r.dD)("data-v-b2ab75de"),e=e(),(0,r.Cn)(),e),i={class:"min-h-screen flex items-center justify-center"},s=o((()=>(0,r._)("span",{class:"loader"},null,-1))),a=[s];function l(e,t){return(0,r.wg)(),(0,r.iD)("div",i,a)}var u=n(3744);const c={},p=(0,u.Z)(c,[["render",l],["__scopeId","data-v-b2ab75de"]]);var d=p},2294:function(e,t,n){"use strict";n.d(t,{Z:function(){return Y}});var r=n(6252),o=n(3577);const i={key:0},s={key:1};function a(e,t,n,a,l,u){const c=(0,r.up)("AppLoader"),p=(0,r.up)("AppFooter"),d=(0,r.up)("WalletConnect"),f=(0,r.up)("AppJoin");return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)([u.salonClass,"font-haffer"])},[u.check?((0,r.wg)(),(0,r.iD)("div",i,[u.ready?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(c,{key:0})),u.ready?(0,r.WI)(e.$slots,"default",{key:1}):(0,r.kq)("",!0),(0,r.Wm)(p,{colors:n.colors},null,8,["colors"])])):(0,r.kq)("",!0),u.check?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",s,[this.walletAddress?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(d,{key:0})),this.walletAddress?((0,r.wg)(),(0,r.j4)(f,{key:1})):(0,r.kq)("",!0),(0,r.Wm)(p,{colors:n.colors},null,8,["colors"])]))],2)}var l=n(9963);const u=(0,r._)("div",{class:"grid grid-cols-10"},[(0,r._)("div",{class:"col-start-7 col-span-4 sm:col-start-8 sm:col-span-3 lg:col-start-9 lg:col-span-2"},[(0,r._)("a",{href:"/#/"},[(0,r._)("img",{src:"Salon_Logotype_RGB_3D.jpg"})])])],-1),c=[u];function p(e,t,n,i,s,a){return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["fixed overflow-hidden left-0 right-0 bottom-0 p-3 z-10",{["bg-"+n.colors[0]]:!0}])},c,2)),[[l.F8,a.ui]])}var d={props:["colors"],components:{},computed:{ui(){return this.$store.state.ui}}},f=n(3744);const h=(0,f.Z)(d,[["render",p]]);var v=h,y=n(1245);const m={key:0},g=(0,r._)("h1",{class:"app-text text-center font-haffer"}," Your application is under review. ",-1);function b(e,t,n,o,i,s){const a=(0,r.up)("AppForm"),l=(0,r.up)("AppContent"),u=(0,r.up)("FormApply"),c=(0,r.up)("FormProposal");return s.ready?((0,r.wg)(),(0,r.iD)("div",m,[s.isNew?((0,r.wg)(),(0,r.j4)(a,{key:0,url:s.uri},null,8,["url"])):(0,r.kq)("",!0),s.isKycApproved||s.isNew?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(l,{key:1,class:"items-center justify-center"},{default:(0,r.w5)((()=>[g])),_:1})),s.isKycApproved&&!s.isApplied?((0,r.wg)(),(0,r.j4)(u,{key:2})):(0,r.kq)("",!0),s.isApplied&&!s.isMember?((0,r.wg)(),(0,r.j4)(c,{key:3,id:s.profile.onboardProposal},null,8,["id"])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)}var w=n(5820),A=n(4798);const k={class:"grid grid-cols-12"},x={class:"col-span-12 sm:col-span-10 sm:col-start-2 lg:col-span-8 lg:col-start-3"},_=(0,r.Uk)("Onboard"),P={class:"block text-lg lg:text-xl font-light mb-4"},E=(0,r.Uk)("How many Units would you like to buy? "),T=(0,r.Uk)(" For how much? ");function S(e,t,n,o,i,s){const a=(0,r.up)("FormLabel"),u=(0,r.up)("FormButtonOk"),c=(0,r.up)("AppContent");return(0,r.wg)(),(0,r.j4)(c,{class:"items-center justify-center"},{default:(0,r.w5)((()=>[(0,r._)("div",k,[(0,r._)("div",x,[(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,l.iM)(((...e)=>s.createProposal&&s.createProposal(...e)),["prevent"])),class:"w-full"},[(0,r.Wm)(a,{count:1,required:!1},{default:(0,r.w5)((()=>[_])),_:1}),(0,r._)("span",P,[E,(0,r.wy)((0,r._)("input",{type:"number",class:"text-lg lg:text-xl bg-transparent border-b border-black w-24 text-black py-3 outline-none placeholder-black font-light",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>i.sAmount=e)},null,512),[[l.nr,i.sAmount]]),T,(0,r.wy)((0,r._)("input",{type:"number",class:"text-lg lg:text-xl bg-transparent border-b border-black w-24 text-black py-3 outline-none placeholder-black font-light","onUpdate:modelValue":t[1]||(t[1]=e=>i.usdcAmount=e),required:""},null,512),[[l.nr,i.usdcAmount]])]),(0,r.Wm)(u,{onReady:t[2]||(t[2]=t=>e.$emit("ready"))})],32)])])])),_:1})}var I=n(9669),O=n.n(I),j=n(4702),R=n(688),U={components:{AppContent:w.Z,FormLabel:R.Z,FormButtonOk:j.Z},data(){return{btnTxt:"Submit",processing:!1,usdcAmount:"",sAmount:""}},methods:{async createProposal(){this.btnTxt="Processing...",this.processing=!0,console.log("Creating Proposal...");try{const e=await O().post("https://salon-node.salondao.xyz/onboard",{profile:this.$store.state.profile,amount:this.usdcAmount.toString(),units:this.sAmount.toString()});e.data.result?this.$store.dispatch("connect"):(console.log(e.data),this.btnTxt="ERROR A1: Contact Support")}catch(e){console.log(e),this.btnTxt="ERROR A2: Contact Support"}}},computed:{walletAddress(){return this.$store.state.walletAddress}}};const F=(0,f.Z)(U,[["render",S]]);var C=F,D=n(8597),M={components:{AppContent:w.Z,AppForm:A.Z,FormApply:C,FormProposal:D.Z},computed:{loaded(){return this.profile},isNew(){return!("kycApproved"in this.profile)&&!("loading"in this.profile)},isKycApproved(){return!!this.profile.kycApproved&&this.profile.kycApproved},isApplied(){return!(!("onboardProposal"in this.profile)||!this.profile.onboardProposal)},isMember(){return"salonUnits"in this.profile&&this.profile.salonUnits},profile(){return this.$store.state.profile},ready(){return!("loading"in this.profile)},uri(){return"https://salon-node.salondao.xyz/form/members"}}};const L=(0,f.Z)(M,[["render",b]]);var B=L;const W={class:"text-center"},z=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-24 h-24 sm:h-32 sm:w-32 mx-auto",viewBox:"0 0 212 189"},[(0,r._)("g",{fill:"none","fill-rule":"evenodd"},[(0,r._)("polygon",{fill:"#CDBDB2",points:"60.75 173.25 88.313 180.563 88.313 171 90.563 168.75 106.313 168.75 106.313 180 106.313 187.875 89.438 187.875 68.625 178.875"}),(0,r._)("polygon",{fill:"#CDBDB2",points:"105.75 173.25 132.75 180.563 132.75 171 135 168.75 150.75 168.75 150.75 180 150.75 187.875 133.875 187.875 113.063 178.875",transform:"matrix(-1 0 0 1 256.5 0)"}),(0,r._)("polygon",{fill:"#393939",points:"90.563 152.438 88.313 171 91.125 168.75 120.375 168.75 123.75 171 121.5 152.438 117 149.625 94.5 150.188"}),(0,r._)("polygon",{fill:"#F89C35",points:"75.375 27 88.875 58.5 95.063 150.188 117 150.188 123.75 58.5 136.125 27"}),(0,r._)("polygon",{fill:"#F89D35",points:"16.313 96.188 .563 141.75 39.938 139.5 65.25 139.5 65.25 119.813 64.125 79.313 58.5 83.813"}),(0,r._)("polygon",{fill:"#D87C30",points:"46.125 101.25 92.25 102.375 87.188 126 65.25 120.375"}),(0,r._)("polygon",{fill:"#EA8D3A",points:"46.125 101.813 65.25 119.813 65.25 137.813"}),(0,r._)("polygon",{fill:"#F89D35",points:"65.25 120.375 87.75 126 95.063 150.188 90 153 65.25 138.375"}),(0,r._)("polygon",{fill:"#EB8F35",points:"65.25 138.375 60.75 173.25 90.563 152.438"}),(0,r._)("polygon",{fill:"#EA8E3A",points:"92.25 102.375 95.063 150.188 86.625 125.719"}),(0,r._)("polygon",{fill:"#D87C30",points:"39.375 138.938 65.25 138.375 60.75 173.25"}),(0,r._)("polygon",{fill:"#EB8F35",points:"12.938 188.438 60.75 173.25 39.375 138.938 .563 141.75"}),(0,r._)("polygon",{fill:"#E8821E",points:"88.875 58.5 64.688 78.75 46.125 101.25 92.25 102.938"}),(0,r._)("polygon",{fill:"#DFCEC3",points:"60.75 173.25 90.563 152.438 88.313 170.438 88.313 180.563 68.063 176.625"}),(0,r._)("polygon",{fill:"#DFCEC3",points:"121.5 173.25 150.75 152.438 148.5 170.438 148.5 180.563 128.25 176.625",transform:"matrix(-1 0 0 1 272.25 0)"}),(0,r._)("polygon",{fill:"#393939",points:"70.313 112.5 64.125 125.438 86.063 119.813",transform:"matrix(-1 0 0 1 150.188 0)"}),(0,r._)("polygon",{fill:"#E88F35",points:"12.375 .563 88.875 58.5 75.938 27"}),(0,r._)("path",{fill:"#8E5A30",d:"M12.3750002,0.562500008 L2.25000003,31.5000005 L7.87500012,65.250001 L3.93750006,67.500001 L9.56250014,72.5625 L5.06250008,76.5000011 L11.25,82.1250012 L7.31250011,85.5000013 L16.3125002,96.7500014 L58.5000009,83.8125012 C79.1250012,67.3125004 89.2500013,58.8750003 88.8750013,58.5000009 C88.5000013,58.1250009 63.0000009,38.8125006 12.3750002,0.562500008 Z"}),(0,r._)("g",{transform:"matrix(-1 0 0 1 211.5 0)"},[(0,r._)("polygon",{fill:"#F89D35",points:"16.313 96.188 .563 141.75 39.938 139.5 65.25 139.5 65.25 119.813 64.125 79.313 58.5 83.813"}),(0,r._)("polygon",{fill:"#D87C30",points:"46.125 101.25 92.25 102.375 87.188 126 65.25 120.375"}),(0,r._)("polygon",{fill:"#EA8D3A",points:"46.125 101.813 65.25 119.813 65.25 137.813"}),(0,r._)("polygon",{fill:"#F89D35",points:"65.25 120.375 87.75 126 95.063 150.188 90 153 65.25 138.375"}),(0,r._)("polygon",{fill:"#EB8F35",points:"65.25 138.375 60.75 173.25 90 153"}),(0,r._)("polygon",{fill:"#EA8E3A",points:"92.25 102.375 95.063 150.188 86.625 125.719"}),(0,r._)("polygon",{fill:"#D87C30",points:"39.375 138.938 65.25 138.375 60.75 173.25"}),(0,r._)("polygon",{fill:"#EB8F35",points:"12.938 188.438 60.75 173.25 39.375 138.938 .563 141.75"}),(0,r._)("polygon",{fill:"#E8821E",points:"88.875 58.5 64.688 78.75 46.125 101.25 92.25 102.938"}),(0,r._)("polygon",{fill:"#393939",points:"70.313 112.5 64.125 125.438 86.063 119.813",transform:"matrix(-1 0 0 1 150.188 0)"}),(0,r._)("polygon",{fill:"#E88F35",points:"12.375 .563 88.875 58.5 75.938 27"}),(0,r._)("path",{fill:"#8E5A30",d:"M12.3750002,0.562500008 L2.25000003,31.5000005 L7.87500012,65.250001 L3.93750006,67.500001 L9.56250014,72.5625 L5.06250008,76.5000011 L11.25,82.1250012 L7.31250011,85.5000013 L16.3125002,96.7500014 L58.5000009,83.8125012 C79.1250012,67.3125004 89.2500013,58.8750003 88.8750013,58.5000009 C88.5000013,58.1250009 63.0000009,38.8125006 12.3750002,0.562500008 Z"})])])],-1),q=(0,r.Uk)(" Connect MetaMask "),H=(0,r._)("p",{class:"sm:hidden mt-4 font-haffer text-xs"}," To access Salon on your mobile device, please connect to Salon through the browser on your Metamask iOS or Android app. ",-1);function Z(e,t,n,o,i,s){const a=(0,r.up)("AppButton"),l=(0,r.up)("AppContent");return 1!=s.connected?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"items-center justify-center"},{default:(0,r.w5)((()=>[(0,r._)("div",W,[z,(0,r._)("p",null,[(0,r.Wm)(a,{class:"mt-8 sm:mt-4",onClick:s.connect},{default:(0,r.w5)((()=>[q])),_:1},8,["onClick"])]),H])])),_:1})):(0,r.kq)("",!0)}var N=n(7175),V={components:{AppButton:N.Z,AppContent:w.Z},computed:{connected(){return localStorage.getItem("salon_login")}},methods:{connect(){this.$store.dispatch("connect")}},async beforeMount(){var e=localStorage.getItem("salon_login");console.log("connected is:",e),1==e&&(console.log("Reconnecting!"),this.$store.dispatch("connect")),window.ethereum&&window.ethereum.on("accountsChanged",(async()=>{await this.$store.dispatch("disconnect"),await this.$store.dispatch("connect")}))}};const $=(0,f.Z)(V,[["render",Z]]);var K=$,G={components:{AppLoader:y.Z,AppFooter:v,WalletConnect:K,AppJoin:B},props:["colors","isLoaded","protected"],computed:{check(){return!this.protected||"units"in this.profile&&this.profile.units},salonClass(){return"bg-"+this.colors[0]+" text-"+this.colors[1]},profile(){return this.$store.state.profile},walletAddress(){return this.$store.state.walletAddress},connecting(){return this.$store.state.connecting},ready(){return this.isLoaded}},methods:{mounted(){console.log(this.background)},connect(){this.$store.dispatch("connect")},disconnect(){this.$store.dispatch("disconnect")}}};const J=(0,f.Z)(G,[["render",a]]);var Y=J},4702:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(6252);const o={class:"flex mt-4 items-center sm:ml-0"},i=(0,r.Uk)(" Ok "),s=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1),a=(0,r._)("span",{class:"text-xs ml-4 font-haffer"},[(0,r.Uk)("Press "),(0,r._)("span",{class:"font-haffer font-bold"},"Enter ↵")],-1);function l(e,t,n,l,u,c){const p=(0,r.up)("AppButton");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(p,{onClick:t[0]||(t[0]=t=>e.$emit("ready")),class:"flex items-center"},{default:(0,r.w5)((()=>[i,s])),_:1}),a])}var u=n(7175),c={components:{AppButton:u.Z}},p=n(3744);const d=(0,p.Z)(c,[["render",l]]);var f=d},688:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(6252),o=n(3577);const i={class:"block mb-4 flex items-center sm:-ml-10 font-haffer font-bold"},s={class:"text-sm"},a=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1);function l(e,t,n,l,u,c){return(0,r.wg)(),(0,r.iD)("label",i,[(0,r._)("span",s,(0,o.zw)(n.count),1),a,(0,r.WI)(e.$slots,"default")])}var u={props:["count","required"]},c=n(3744);const p=(0,c.Z)(u,[["render",l]]);var d=p},8597:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var r=n(6252),o=n(3577);const i={key:1,class:"pt-32 font-haffer px-3"},s={class:"grid grid-cols-12"},a={class:"app-frame"},l={class:"capitalize text-xl"},u=(0,r._)("br",null,null,-1),c={key:0,class:"mt-3 flex"},p={class:"mt-5 pb-24"},d=(0,r._)("br",null,null,-1);function f(e,t,n,f,h,v){const y=(0,r.up)("AppLoader"),m=(0,r.up)("CounterVote"),g=(0,r.up)("AppCountdown"),b=(0,r.up)("AppButtonVote");return(0,r.wg)(),(0,r.iD)(r.HY,null,[h.loaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(y,{key:0})),h.loaded?((0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",s,[(0,r._)("div",a,[(0,r._)("b",l,(0,o.zw)(h.proposalFormat.contentType),1),u,(0,r.Uk)(" "+(0,o.zw)(h.proposalFormat.id)+" ",1),(0,r.Wm)(m,{votes:h.proposalFormat.votes,weights:h.weights},null,8,["votes","weights"]),(0,r.Wm)(g,{start:h.proposalFormat.createdAt,class:"mt-2"},null,8,["start"]),v.canVote?((0,r.wg)(),(0,r.iD)("div",c,[(0,r.Wm)(b,{id:h.proposalFormat.id,votes:h.proposalFormat.votes,choice:!0,label:"Yes",class:"mr-2"},null,8,["id","votes"]),(0,r.Wm)(b,{id:h.proposalFormat.id,votes:h.proposalFormat.votes,choice:!1,label:"No"},null,8,["id","votes"])])):(0,r.kq)("",!0),(0,r._)("ul",p,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.proposalFormat.fields,((e,t)=>((0,r.wg)(),(0,r.iD)("li",{key:t,class:"mr-5 mb-5"},[(0,r._)("b",null,(0,o.zw)(e.label),1),d,(0,r.Uk)((0,o.zw)(e.value),1)])))),128))])])])])):(0,r.kq)("",!0)],64)}var h=n(9669),v=n.n(h),y=n(1245);const m={class:"text-xs"},g={class:"bg-black w-full relative my-3",style:{height:"2px"}},b={class:"pt-2"},w={key:0},A=["innerHTML"];function k(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("div",g,[(0,r._)("div",{class:"bg-green-400 absolute z-20",style:(0,o.j5)([{height:"2px"},{width:a.percentageYes+"%"}])},null,4),(0,r._)("div",{class:"bg-red-400 absolute z-10",style:(0,o.j5)([{height:"2px"},{width:a.percentageYes+a.percentageNo+"%"}])},null,4)]),(0,r._)("div",null,"Total Votes: "+(0,o.zw)(a.total),1),(0,r._)("div",null,"Yes: "+(0,o.zw)(a.yesPercentageTally)+"%",1),(0,r._)("div",null,"No: "+(0,o.zw)(a.noPercentageTally)+"%",1),(0,r._)("div",b,[a.passed?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"flex items-center",innerHTML:a.passType},null,8,A)):((0,r.wg)(),(0,r.iD)("div",w,"This did not pass."))])])}var x={props:["votes","weights"],computed:{totalUnits(){var e=this.weights.map((e=>e.fields.units)).reduce(((e,t)=>e+t),0);return e},maxUnits(){return Math.round(.1*this.totalUnits)},totalValidUnits(){var e=this,t=this.weights.map((function(t){var n={};return n.walletAddress=t.fields.walletAddress,n.units=t.fields.units,n.units>e.maxUnits&&(n.units=e.maxUnits),n}));return t.map((e=>e.units)).reduce(((e,t)=>e+t),0)},total(){return this.votes.votes.length},yesTotal(){return this.votes.votes.filter((e=>{var t=JSON.parse(e.vote);if(t.vote)return!0})).length},noTotal(){return this.votes.votes.filter((e=>{var t=JSON.parse(e.vote);if(!t.vote)return!0})).length},w(){var e={};for(let t of this.weights)e[t.fields.walletAddress]=t.fields.units;return e},wNormal(){var e=.1*this.totalUnits,t={};for(let n of this.weights)t[n.fields.walletAddress]=n.fields.units,n.fields.units>e&&(t[n.fields.walletAddress]=e);return t},yesWeight(){var e=0,t=this;return this.votes.votes.forEach((function(n){var r=JSON.parse(n.vote);r.vote&&(e=parseInt(e)+parseInt(t.wNormal[r.address]))})),e},noWeight(){var e=0,t=this;return this.votes.votes.forEach((function(n){var r=JSON.parse(n.vote);r.vote||(e=parseInt(e)+parseInt(t.wNormal[r.address]))})),e},yesPercentageTally(){return this.total?Math.round(this.yesWeight/(this.yesWeight+this.noWeight)*100):0},noPercentageTally(){return this.total?Math.round(this.noWeight/(this.yesWeight+this.noWeight)*100):0},percentageYes(){return this.totalUnits&&this.yesWeight?Math.round(this.yesWeight/this.totalValidUnits*100):0},percentageNo(){return this.totalUnits&&this.noWeight?Math.round(this.noWeight/this.totalValidUnits*100):0},passed(){return this.yesPercentageTally>this.noPercentageTally},passType(){var e='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>This passed with majority.';return this.percentageYes>50&&(e='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>This passed with true majority.'),this.percentageYes>75&&(e='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" /></svg>This passed with supermajority.'),e}}},_=n(3744);const P=(0,_.Z)(x,[["render",k]]);var E=P,T=n(6988);const S=e=>((0,r.dD)("data-v-203bd7e2"),e=e(),(0,r.Cn)(),e),I={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},O=S((()=>(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1))),j=[O];function R(e,t,n,i,s,a){const l=(0,r.up)("AppButton");return(0,r.wg)(),(0,r.j4)(l,{onClick:t[0]||(t[0]=e=>a.vote()),disabled:s.processing,class:(0,o.C_)(["flex items-center",{active:a.voted}])},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(n.label)+" ",1),a.voted?((0,r.wg)(),(0,r.iD)("svg",I,j)):(0,r.kq)("",!0)])),_:1},8,["disabled","class"])}var U=n(7175),F={components:{AppButton:U.Z},props:["id","votes","choice","label"],data(){return{processing:!1}},computed:{walletAddress(){return this.$store.state.walletAddress},voted(){if(!this.votes)return!1;var e=!1;return this.votes.votes.forEach((t=>{var n=JSON.parse(t.vote);n.address==this.walletAddress&&n.vote==this.choice&&(e=!0)})),e}},methods:{async vote(){const e=JSON.stringify({address:this.walletAddress,vote:this.choice,proposal:this.id});try{const t=await this.$store.state.signer.signMessage(e);console.log("Sending Vote!");const n=await v().post("https://salontest-terrifickid.cloud.okteto.net/vote/"+this.id,{address:this.walletAddress,vote:e,signature:t});console.log(n.data),location.reload()}catch(t){console.log(t)}}}};const C=(0,_.Z)(F,[["render",R],["__scopeId","data-v-203bd7e2"]]);var D=C,M={components:{CounterVote:E,AppCountdown:T.Z,AppButtonVote:D,AppLoader:y.Z},props:["id"],emits:["ready"],data(){return{proposal:{},proposalFormat:{},weights:[],loaded:!1}},computed:{canVote(){return"units"in this.profile&&this.profile.units>0},profile(){return this.$store.state.profile},uri(){return"https://salon-node.salondao.xyz/entry/"+this.id}},methods:{async getWeights(){try{const e=await v().get("https://salon-node.salondao.xyz/members?cache=true");this.weights=e.data}catch(e){console.log("error",e)}},getFieldLabel(e,t){for(let n of e)if(n.id==t)return n.name},async assembleProposalType(e){var t=this;try{var n=await v().get("https://salon-node.salondao.xyz/form/"+e+"?cache=true"),r={votes:[]};"votes"in this.proposal.fields&&(r=this.proposal.fields.votes,delete this.proposal.fields.votes);var o=await Object.entries(this.proposal.fields).map((function(e){var r=t.getFieldLabel(n.data.fields,e[0]);return{label:r,value:e[1]}})),i={id:this.proposal.sys.id,createdAt:this.proposal.sys.createdAt,contentType:this.proposal.sys.contentType.sys.id,votes:r,fields:o};return i}catch(s){return console.error(s),[]}}},async mounted(){console.log("loading proposal!"),await this.getWeights();try{const t=await v().get(this.uri);this.proposal=t.data;var e=await this.assembleProposalType(this.proposal.sys.contentType.sys.id);this.proposalFormat=e,this.loaded=!0,this.$emit("ready")}catch(t){console.log("error",t)}}};const L=(0,_.Z)(M,[["render",f]]);var B=L}}]);
//# sourceMappingURL=294.1dbd7c94.js.map