{"version":3,"file":"js/ViewGovernance.49c40b88.js","mappings":"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","sources":["webpack://Salon/./src/views/ViewGovernance.vue","webpack://Salon/./src/views/ViewGovernance.vue?2954","webpack://Salon/./src/views/ViewProposal.vue","webpack://Salon/./src/views/ViewProposal.vue?6f6e"],"sourcesContent":["<template>\n  <AppShell\n    :colors=\"colors\"\n    :isLoaded=\"loaded\"\n    :protected=\"true\"\n    class=\"font-haffer\"\n  >\n    <AppContent class=\"items-center\">\n      <div class=\"grid grid-cols-12 w-full\">\n        <div class=\"app-frame\">\n          <div class=\"px-3\">\n            <p class=\"text-xl\">My Proposals</p>\n            <p class=\"text-sm mt-3\">No proposals currently submitted.</p>\n\n            <p class=\"mt-24 text-xl\">All Proposals</p>\n            <div class=\"mt-3\">\n              <div\n                v-for=\"(item, index) in proposals\"\n                :key=\"index\"\n                class=\"border-b border-black py-3 grid grid-cols-12\"\n              >\n                <div class=\"col-span-8\">\n                  <b class=\"capitalize\">{{ item.contentType }}</b>\n                  {{ item.id }}\n                  <AppCountdown :start=\"item.createdAt\" />\n                </div>\n                <div class=\"col-span-4 flex items-center justify-end text-sm\">\n                  <router-link :to=\"'/governance/' + item.id\"\n                    ><AppButton class=\"flex items-center\"\n                      >View Proposal\n                    </AppButton></router-link\n                  >\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </AppContent>\n  </AppShell>\n</template>\n<script>\n// @ is an alias to /src\nimport axios from \"axios\";\n\nimport AppCountdown from \"@/components/AppCountdown\";\nimport AppShell from \"@/components/AppShell\";\nimport AppContent from \"@/components/AppContent\";\nimport AppButton from \"@/components/AppButton\";\n\nexport default {\n  components: {\n    AppShell,\n    AppContent,\n    AppCountdown,\n    AppButton,\n  },\n  data() {\n    return {\n      colors: [\"white\", \"black\"],\n      proposals: [],\n      weights: [],\n      types: [\"collect\", \"invest\", \"propose\", \"sell\", \"transfer\", \"onboard\"],\n      loaded: false,\n    };\n  },\n  computed: {},\n  methods: {\n    async getWeights() {\n      try {\n        const res = await axios.get(\n          process.env.VUE_APP_URI + \"/members?cache=true\"\n        );\n        this.weights = res.data;\n      } catch (error) {\n        console.log(\"error\", error);\n      }\n    },\n    getFieldLabel(fields, id) {\n      for (let field of fields) {\n        if (field.id == id) return field.name;\n      }\n    },\n    async assembleProposalType(type) {\n      var endpoints = [\n        process.env.VUE_APP_URI + \"/type/\" + type + \"?cache=true\",\n        process.env.VUE_APP_URI + \"/form/\" + type + \"?cache=true\",\n      ];\n      var scope = this;\n      try {\n        var items = [];\n        var e = await Promise.all(\n          endpoints.map((endpoint) => axios.get(endpoint))\n        );\n        for (const value of Object.values(e[0].data.message.items)) {\n          var votes = { votes: [] };\n          if (\"votes\" in value.fields) {\n            votes = value.fields.votes;\n            delete value.fields.votes;\n          }\n\n          var fields = await Object.entries(value.fields).map(function (field) {\n            var label = scope.getFieldLabel(e[1].data.fields, field[0]);\n            return {\n              label: label,\n              value: field[1],\n            };\n          });\n\n          var item = {\n            id: value.sys.id,\n            createdAt: value.sys.createdAt,\n            contentType: value.sys.contentType.sys.id,\n            votes: votes,\n            fields: fields,\n          };\n          items.push(item);\n        }\n\n        return items;\n      } catch (error) {\n        console.error(error);\n        return [];\n      }\n    },\n  },\n  async beforeMount() {\n    console.log(\"proposals load!\");\n    var data = await Promise.all(\n      this.types.map((type) => this.assembleProposalType(type))\n    );\n    this.proposals = data.flat();\n    await this.getWeights();\n    this.loaded = true;\n    console.log(\"loaded!\");\n    console.log(this.proposals);\n  },\n};\n</script>\n<style scoped>\nselect {\n  border: 0px;\n  outline: 0px;\n}\n</style>\n","import { render } from \"./ViewGovernance.vue?vue&type=template&id=05a5d790&scoped=true\"\nimport script from \"./ViewGovernance.vue?vue&type=script&lang=js\"\nexport * from \"./ViewGovernance.vue?vue&type=script&lang=js\"\n\nimport \"./ViewGovernance.vue?vue&type=style&index=0&id=05a5d790&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/tk/oz.salon.dapp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-05a5d790\"]])\n\nexport default __exports__","<template>\n  <AppShell :colors=\"colors\" :isLoaded=\"true\">\n    <FormProposal :id=\"$route.params.id\" @ready=\"ready\" />\n  </AppShell>\n</template>\n\n<script>\n// @ is an alias to /src\nimport AppShell from \"@/components/AppShell\";\n\nimport FormProposal from \"@/components/FormProposal\";\nexport default {\n  components: { AppShell, FormProposal },\n  data() {\n    return {\n      colors: [\"white\", \"black\"],\n      isReady: false,\n    };\n  },\n  methods: {\n    ready() {\n      this.isReady = true;\n    },\n  },\n};\n</script>\n","import { render } from \"./ViewProposal.vue?vue&type=template&id=59b6bd7a\"\nimport script from \"./ViewProposal.vue?vue&type=script&lang=js\"\nexport * from \"./ViewProposal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/tk/oz.salon.dapp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","colors","isLoaded","loaded","protected","proposals","item","index","key","contentType","id","start","createdAt","to","components","AppShell","AppContent","AppCountdown","AppButton","data","weights","types","computed","methods","async","res","this","error","console","log","getFieldLabel","fields","field","name","type","endpoints","scope","items","e","Promise","all","map","endpoint","value","Object","values","message","votes","entries","label","sys","push","assembleProposalType","flat","getWeights","__exports__","render","$route","params","ready","FormProposal","isReady"],"sourceRoot":""}