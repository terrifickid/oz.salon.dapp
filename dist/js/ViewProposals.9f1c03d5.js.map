{"version":3,"file":"js/ViewProposals.9f1c03d5.js","mappings":"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","sources":["webpack://Salon/./src/components/ManageNav.vue","webpack://Salon/./src/components/ManageNav.vue?1ae9","webpack://Salon/./src/views/manage/ViewProposals.vue","webpack://Salon/./src/components/ListProposalItem.vue","webpack://Salon/./src/components/ListProposalItem.vue?998a","webpack://Salon/./src/views/manage/ViewProposals.vue?db40"],"sourcesContent":["<template>\n  <div id=\"links\" class=\"grid grid-cols-12\">\n    <div class=\"col-span-6 md:col-span-12\">\n      <ul class=\"mb-10\">\n        <li><router-link to=\"/manage/start\">Start</router-link></li>\n        <li><router-link to=\"/manage/treasury\">Treasury</router-link></li>\n        <li>\n          <router-link class=\"flex items-center\" to=\"/manage/proposals\">\n            <p class=\"dot inline-block\">\n              Proposals\n              <span\n                :class=\"{ hidden: !activeProposalsCount }\"\n                class=\"text-green-500\"\n              >\n                <span style=\"margin-right: 1px\">(</span>{{ activeProposalsCount\n                }}<span style=\"margin-left: 1px\">)</span></span\n              >\n            </p></router-link\n          >\n        </li>\n      </ul>\n    </div>\n    <div class=\"col-span-6 md:col-span-12\">\n      <ul class=\"mb-10\">\n        <li><router-link to=\"/manage/profile\">Profile</router-link></li>\n        <li>\n          <router-link to=\"/manage/members\"\n            >Members\n            <p class=\"inline-block\" :class=\"{ hidden: !membersCount }\">\n              <span style=\"margin-right: 1px\">(</span>{{ membersCount\n              }}<span style=\"margin-left: 1px\">)</span>\n            </p></router-link\n          >\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  computed: {\n    activeProposalsCount() {\n      return this.$store.getters.activeProposalsCount;\n    },\n    membersCount() {\n      return this.$store.getters.membersCount;\n    },\n  },\n};\n</script>\n<style scoped>\n#links a {\n  @apply opacity-50;\n}\n#links a.router-link-active {\n  @apply opacity-100 relative;\n}\n</style>\n","import { render } from \"./ManageNav.vue?vue&type=template&id=27aaa3e6&scoped=true\"\nimport script from \"./ManageNav.vue?vue&type=script&lang=js\"\nexport * from \"./ManageNav.vue?vue&type=script&lang=js\"\n\nimport \"./ManageNav.vue?vue&type=style&index=0&id=27aaa3e6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-27aaa3e6\"]])\n\nexport default __exports__","<template>\n  <AppLoaderFull v-if=\"!loaded\" />\n  <div class=\"container-fluid px-5\">\n    <div class=\"grid grid-cols-12 gap-5\">\n      <div class=\"col-span-12 md:col-span-3\">\n        <div class=\"md:fixed\">\n          <ManageNav />\n\n          <div class=\"hidden md:block\">\n            <span class=\"opacity-50\">Filters</span>\n            <ul>\n              <li\n                :class=\"{\n                  'opacity-50': filter != 'all',\n                  'opacity-100': filter == 'all',\n                }\"\n              >\n                <button @click=\"filter = 'all'\">All</button>\n              </li>\n\n              <li\n                :class=\"{\n                  'opacity-50': filter != 'pending',\n                  'opacity-100': filter == 'pending',\n                }\"\n              >\n                <button @click=\"filter = 'pending'\">Pending</button>\n              </li>\n\n              <li\n                :class=\"{\n                  'opacity-50': filter != 'closed',\n                  'opacity-100': filter == 'closed',\n                }\"\n              >\n                <button @click=\"filter = 'closed'\">Closed</button>\n              </li>\n\n              <li\n                :class=\"{\n                  'opacity-50': filter != 'my',\n                  'opacity-100': filter == 'my',\n                }\"\n              >\n                <button @click=\"filter = 'my'\">My Proposals</button>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-span-12 md:col-span-9\">\n        <p v-if=\"!filteredProposals.length\">No proposals.</p>\n        <ListProposalItem\n          v-for=\"(item, index) in filteredProposals.slice(0, perPage)\"\n          :key=\"index\"\n          :item=\"item\"\n          :members=\"members\"\n        />\n\n        <button\n          class=\"flex opacity-50 mt-12 cursor-pointer\"\n          @click=\"perPage += 10\"\n          v-if=\"perPage <= filteredProposals.length\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke-width=\"1.5\"\n            stroke=\"currentColor\"\n            class=\"w-6 h-6 mr-1\"\n          >\n            <path\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              d=\"M12 6v12m6-6H6\"\n            />\n          </svg>\n\n          Load More\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n// @ is an alias to /src\n//import _ from \"lodash\";\nimport axios from \"axios\";\nimport ManageNav from \"@/components/ManageNav\";\nimport AppLoaderFull from \"@/components/AppLoaderFull\";\nimport ListProposalItem from \"@/components/ListProposalItem\";\nimport _ from \"lodash\";\nexport default {\n  components: {\n    ManageNav,\n    ListProposalItem,\n    AppLoaderFull,\n  },\n  data() {\n    return {\n      members: [],\n      loaded: false,\n      filter: \"all\",\n      perPage: 10,\n    };\n  },\n  computed: {\n    filteredProposals() {\n      var p;\n      switch (this.filter) {\n        case \"my\":\n          p = this.myProposals;\n          break;\n        case \"pending\":\n          p = this.activeProposals;\n          break;\n        case \"voted\":\n          p = this.votedProposals;\n          break;\n        case \"closed\":\n          p = this.closedProposals;\n          break;\n        default:\n          p = this.proposals;\n      }\n      var addressFilter = _.get(this.$route, \"params.address\");\n      if (addressFilter) {\n        p = p.filter((item) => {\n          var checkAddress = _.get(item, \"fields.profile.walletAddress\");\n          return addressFilter == checkAddress;\n        });\n      }\n      return p.sort(function compareFn(a, b) {\n        var aIsClosed = typeof _.get(a, \"fields.votes.passed\") == \"boolean\";\n        var bIsClosed = typeof _.get(b, \"fields.votes.passed\") == \"boolean\";\n        if (aIsClosed && !bIsClosed) return 1;\n        if (!aIsClosed && bIsClosed) return -1;\n        return 0;\n      });\n    },\n    proposals() {\n      return this.$store.state.proposals;\n    },\n    walletAddress() {\n      return this.$store.state.walletAddress;\n    },\n    myProposals() {\n      return this.proposals.filter(\n        (item) =>\n          _.get(item, \"fields.profile.walletAddress\") == this.walletAddress\n      );\n    },\n    votedProposals() {\n      return this.activeProposals.filter(\n        (item) => _.get(item, \"fields.votes.votes.length\") > 0\n      );\n    },\n    activeProposals() {\n      return this.proposals.filter(\n        (item) => typeof _.get(item, \"fields.votes.passed\") != \"boolean\"\n      );\n    },\n    closedProposals() {\n      return this.proposals.filter(\n        (item) => typeof _.get(item, \"fields.votes.passed\") == \"boolean\"\n      );\n    },\n    uri() {\n      return process.env.VUE_APP_URI + \"/types/\";\n    },\n  },\n  methods: {\n    async getMembers() {\n      try {\n        const res = await axios.get(process.env.VUE_APP_URI + \"/members\");\n        return res.data;\n      } catch (error) {\n        console.log(\"error\", error);\n      }\n    },\n  },\n  async beforeMount() {\n    console.log(\"proposals load!\");\n    const res = await axios.post(this.uri, {\n      types: \"exchange,acquire,invest,propose,sell,onboard,kick\",\n    });\n    this.$store.state.proposals = _.get(res, \"data.message\");\n\n    this.members = await this.getMembers();\n    this.loaded = true;\n    console.log(\"loaded!\");\n  },\n};\n</script>\n<style scoped>\nselect {\n  border: 0px;\n  outline: 0px;\n}\n</style>\n","<template>\n  <router-link :to=\"'/manage/' + item.sys.id\" class=\"group\">\n    <div\n      class=\"grid grid-cols-12 flex items-center gap-x-5\"\n      :class=\"{ 'mb-10': !hasPassed, 'mb-5': hasPassed }\"\n    >\n      <div\n        class=\"col-span-2 md:col-span-1\"\n        :class=\"{ 'text-green-500': !hasPassed }\"\n      >\n        <span class=\"\" :class=\"{ 'text-green-500 dot': !hasPassed }\">{{\n          prettyId\n        }}</span>\n      </div>\n\n      <div class=\"col-span-2\" :class=\"{ 'text-green-500': !hasPassed }\">\n        <b class=\"capitalize\">{{ item.sys.contentType.sys.id }} </b>\n      </div>\n\n      <div class=\"hidden col-start-2 col-span-10 lg:block xl:col-span-5\">\n        <AppCountdown\n          v-if=\"hasPassed\"\n          :start=\"0\"\n          :type=\"item.sys.contentType.sys.id\"\n        />\n        <AppCountdown\n          v-else\n          :start=\"item.sys.createdAt\"\n          :type=\"item.sys.contentType.sys.id\"\n        />\n      </div>\n\n      <div class=\"col-start-3 md:col-start-2 col-span-8 xl:col-span-2 truncate\">\n        {{ item.fields.profile.firstName }}\n        {{ item.fields.profile.lastName }}\n      </div>\n      <div class=\"hidden xl:block xl:col-span-2 md:text-right\">\n        <CounterVote :votes=\"item.fields.votes\" :members=\"members\" :mode=\"1\" />\n      </div>\n    </div>\n  </router-link>\n</template>\n<script>\nimport _ from \"lodash\";\nimport CounterVote from \"@/components/CounterVote\";\nimport AppCountdown from \"@/components/AppCountdown\";\nexport default {\n  components: { AppCountdown, CounterVote },\n  props: [\"item\", \"members\"],\n  computed: {\n    prettyId() {\n      var id = this.item.fields.prettyId;\n      if (!id) id = 0;\n      //return this.item.fields.prettyId;\n      var zeroes = new Array(3 + 1).join(\"0\");\n      return (zeroes + id.toString().replace(/\\D/g, \"\")).slice(-3);\n    },\n    hasPassed() {\n      return typeof _.get(this.item, \"fields.votes.passed\") == \"boolean\";\n    },\n  },\n  mounted() {\n    console.log();\n  },\n};\n</script>\n","import { render } from \"./ListProposalItem.vue?vue&type=template&id=38fb6fee\"\nimport script from \"./ListProposalItem.vue?vue&type=script&lang=js\"\nexport * from \"./ListProposalItem.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ViewProposals.vue?vue&type=template&id=345abae7&scoped=true\"\nimport script from \"./ViewProposals.vue?vue&type=script&lang=js\"\nexport * from \"./ViewProposals.vue?vue&type=script&lang=js\"\n\nimport \"./ViewProposals.vue?vue&type=style&index=0&id=345abae7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-345abae7\"]])\n\nexport default __exports__"],"names":["id","class","to","activeProposalsCount","style","membersCount","computed","this","$store","getters","__exports__","render","loaded","filter","filteredProposals","length","slice","perPage","item","index","key","members","xmlns","fill","viewBox","stroke","d","sys","hasPassed","prettyId","contentType","start","type","createdAt","fields","profile","firstName","lastName","votes","mode","components","AppCountdown","CounterVote","props","zeroes","Array","join","toString","replace","mounted","console","log","ManageNav","ListProposalItem","AppLoaderFull","data","p","myProposals","activeProposals","votedProposals","closedProposals","proposals","addressFilter","$route","checkAddress","sort","a","b","aIsClosed","bIsClosed","state","walletAddress","uri","methods","getMembers","res","error","beforeMount","types"],"sourceRoot":""}