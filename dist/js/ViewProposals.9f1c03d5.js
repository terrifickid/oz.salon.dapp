"use strict";(self["webpackChunkSalon"]=self["webpackChunkSalon"]||[]).push([[933],{240:function(e,s,t){t.d(s,{A:function(){return f}});var l=t(641),o=t(33);const a={id:"links",class:"grid grid-cols-12"},r={class:"col-span-6 md:col-span-12"},n={class:"mb-10"},i={class:"dot inline-block"},p={class:"col-span-6 md:col-span-12"},d={class:"mb-10"};function c(e,s,t,c,u,m){const k=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("div",r,[(0,l.Lk)("ul",n,[(0,l.Lk)("li",null,[(0,l.bF)(k,{to:"/manage/start"},{default:(0,l.k6)((()=>s[0]||(s[0]=[(0,l.eW)("Start")]))),_:1})]),(0,l.Lk)("li",null,[(0,l.bF)(k,{to:"/manage/treasury"},{default:(0,l.k6)((()=>s[1]||(s[1]=[(0,l.eW)("Treasury")]))),_:1})]),(0,l.Lk)("li",null,[(0,l.bF)(k,{class:"flex items-center",to:"/manage/proposals"},{default:(0,l.k6)((()=>[(0,l.Lk)("p",i,[s[4]||(s[4]=(0,l.eW)(" Proposals ")),(0,l.Lk)("span",{class:(0,o.C4)([{hidden:!m.activeProposalsCount},"text-green-500"])},[s[2]||(s[2]=(0,l.Lk)("span",{style:{"margin-right":"1px"}},"(",-1)),(0,l.eW)((0,o.v_)(m.activeProposalsCount),1),s[3]||(s[3]=(0,l.Lk)("span",{style:{"margin-left":"1px"}},")",-1))],2)])])),_:1})])])]),(0,l.Lk)("div",p,[(0,l.Lk)("ul",d,[(0,l.Lk)("li",null,[(0,l.bF)(k,{to:"/manage/profile"},{default:(0,l.k6)((()=>s[5]||(s[5]=[(0,l.eW)("Profile")]))),_:1})]),(0,l.Lk)("li",null,[(0,l.bF)(k,{to:"/manage/members"},{default:(0,l.k6)((()=>[s[8]||(s[8]=(0,l.eW)("Members ")),(0,l.Lk)("p",{class:(0,o.C4)(["inline-block",{hidden:!m.membersCount}])},[s[6]||(s[6]=(0,l.Lk)("span",{style:{"margin-right":"1px"}},"(",-1)),(0,l.eW)((0,o.v_)(m.membersCount),1),s[7]||(s[7]=(0,l.Lk)("span",{style:{"margin-left":"1px"}},")",-1))],2)])),_:1})])])])])}var u={computed:{activeProposalsCount(){return this.$store.getters.activeProposalsCount},membersCount(){return this.$store.getters.membersCount}}},m=t(6262);const k=(0,m.A)(u,[["render",c],["__scopeId","data-v-27aaa3e6"]]);var f=k},5490:function(e,s,t){t.r(s),t.d(s,{default:function(){return I}});var l=t(641),o=t(33);const a={class:"container-fluid px-5"},r={class:"grid grid-cols-12 gap-5"},n={class:"col-span-12 md:col-span-3"},i={class:"md:fixed"},p={class:"hidden md:block"},d={class:"col-span-12 md:col-span-9"},c={key:0};function u(e,s,t,u,m,k){const f=(0,l.g2)("AppLoaderFull"),g=(0,l.g2)("ManageNav"),v=(0,l.g2)("ListProposalItem");return(0,l.uX)(),(0,l.CE)(l.FK,null,[m.loaded?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(f,{key:0})),(0,l.Lk)("div",a,[(0,l.Lk)("div",r,[(0,l.Lk)("div",n,[(0,l.Lk)("div",i,[(0,l.bF)(g),(0,l.Lk)("div",p,[s[5]||(s[5]=(0,l.Lk)("span",{class:"opacity-50"},"Filters",-1)),(0,l.Lk)("ul",null,[(0,l.Lk)("li",{class:(0,o.C4)({"opacity-50":"all"!=m.filter,"opacity-100":"all"==m.filter})},[(0,l.Lk)("button",{onClick:s[0]||(s[0]=e=>m.filter="all")},"All")],2),(0,l.Lk)("li",{class:(0,o.C4)({"opacity-50":"pending"!=m.filter,"opacity-100":"pending"==m.filter})},[(0,l.Lk)("button",{onClick:s[1]||(s[1]=e=>m.filter="pending")},"Pending")],2),(0,l.Lk)("li",{class:(0,o.C4)({"opacity-50":"closed"!=m.filter,"opacity-100":"closed"==m.filter})},[(0,l.Lk)("button",{onClick:s[2]||(s[2]=e=>m.filter="closed")},"Closed")],2),(0,l.Lk)("li",{class:(0,o.C4)({"opacity-50":"my"!=m.filter,"opacity-100":"my"==m.filter})},[(0,l.Lk)("button",{onClick:s[3]||(s[3]=e=>m.filter="my")},"My Proposals")],2)])])])]),(0,l.Lk)("div",d,[k.filteredProposals.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("p",c,"No proposals.")),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(k.filteredProposals.slice(0,m.perPage),((e,s)=>((0,l.uX)(),(0,l.Wv)(v,{key:s,item:e,members:m.members},null,8,["item","members"])))),128)),m.perPage<=k.filteredProposals.length?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"flex opacity-50 mt-12 cursor-pointer",onClick:s[4]||(s[4]=e=>m.perPage+=10)},s[6]||(s[6]=[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,l.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m6-6H6"})],-1),(0,l.eW)(" Load More ")]))):(0,l.Q3)("",!0)])])])],64)}var m=t(2505),k=t.n(m),f=t(240),g=t(4071);const v={class:"capitalize"},y={class:"hidden col-start-2 col-span-10 lg:block xl:col-span-5"},b={class:"col-start-3 md:col-start-2 col-span-8 xl:col-span-2 truncate"},h={class:"hidden xl:block xl:col-span-2 md:text-right"};function L(e,s,t,a,r,n){const i=(0,l.g2)("AppCountdown"),p=(0,l.g2)("CounterVote"),d=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.Wv)(d,{to:"/manage/"+t.item.sys.id,class:"group"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:(0,o.C4)(["grid grid-cols-12 flex items-center gap-x-5",{"mb-10":!n.hasPassed,"mb-5":n.hasPassed}])},[(0,l.Lk)("div",{class:(0,o.C4)(["col-span-2 md:col-span-1",{"text-green-500":!n.hasPassed}])},[(0,l.Lk)("span",{class:(0,o.C4)(["",{"text-green-500 dot":!n.hasPassed}])},(0,o.v_)(n.prettyId),3)],2),(0,l.Lk)("div",{class:(0,o.C4)(["col-span-2",{"text-green-500":!n.hasPassed}])},[(0,l.Lk)("b",v,(0,o.v_)(t.item.sys.contentType.sys.id),1)],2),(0,l.Lk)("div",y,[n.hasPassed?((0,l.uX)(),(0,l.Wv)(i,{key:0,start:0,type:t.item.sys.contentType.sys.id},null,8,["type"])):((0,l.uX)(),(0,l.Wv)(i,{key:1,start:t.item.sys.createdAt,type:t.item.sys.contentType.sys.id},null,8,["start","type"]))]),(0,l.Lk)("div",b,(0,o.v_)(t.item.fields.profile.firstName)+" "+(0,o.v_)(t.item.fields.profile.lastName),1),(0,l.Lk)("div",h,[(0,l.bF)(p,{votes:t.item.fields.votes,members:t.members,mode:1},null,8,["votes","members"])])],2)])),_:1},8,["to"])}var C=t(2543),P=t.n(C),w=t(5876),x=t(3747),A={components:{AppCountdown:x.A,CounterVote:w.A},props:["item","members"],computed:{prettyId(){var e=this.item.fields.prettyId;e||(e=0);var s=new Array(4).join("0");return(s+e.toString().replace(/\D/g,"")).slice(-3)},hasPassed(){return"boolean"==typeof P().get(this.item,"fields.votes.passed")}},mounted(){console.log()}},_=t(6262);const W=(0,_.A)(A,[["render",L]]);var F=W,X={components:{ManageNav:f.A,ListProposalItem:F,AppLoaderFull:g.A},data(){return{members:[],loaded:!1,filter:"all",perPage:10}},computed:{filteredProposals(){var e;switch(this.filter){case"my":e=this.myProposals;break;case"pending":e=this.activeProposals;break;case"voted":e=this.votedProposals;break;case"closed":e=this.closedProposals;break;default:e=this.proposals}var s=P().get(this.$route,"params.address");return s&&(e=e.filter((e=>{var t=P().get(e,"fields.profile.walletAddress");return s==t}))),e.sort((function(e,s){var t="boolean"==typeof P().get(e,"fields.votes.passed"),l="boolean"==typeof P().get(s,"fields.votes.passed");return t&&!l?1:!t&&l?-1:0}))},proposals(){return this.$store.state.proposals},walletAddress(){return this.$store.state.walletAddress},myProposals(){return this.proposals.filter((e=>P().get(e,"fields.profile.walletAddress")==this.walletAddress))},votedProposals(){return this.activeProposals.filter((e=>P().get(e,"fields.votes.votes.length")>0))},activeProposals(){return this.proposals.filter((e=>"boolean"!=typeof P().get(e,"fields.votes.passed")))},closedProposals(){return this.proposals.filter((e=>"boolean"==typeof P().get(e,"fields.votes.passed")))},uri(){return"https://salon2-ymzsucskyq-wl.a.run.app/types/"}},methods:{async getMembers(){try{const e=await k().get("https://salon2-ymzsucskyq-wl.a.run.app/members");return e.data}catch(e){console.log("error",e)}}},async beforeMount(){console.log("proposals load!");const e=await k().post(this.uri,{types:"exchange,acquire,invest,propose,sell,onboard,kick"});this.$store.state.proposals=P().get(e,"data.message"),this.members=await this.getMembers(),this.loaded=!0,console.log("loaded!")}};const M=(0,_.A)(X,[["render",u],["__scopeId","data-v-345abae7"]]);var I=M}}]);
//# sourceMappingURL=ViewProposals.9f1c03d5.js.map