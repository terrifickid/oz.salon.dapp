"use strict";(self["webpackChunkSalon"]=self["webpackChunkSalon"]||[]).push([[563],{6364:function(e,s,t){t.r(s),t.d(s,{default:function(){return S}});var o=t(6252),a=t(3577);const l=e=>((0,o.dD)("data-v-4ecffbbc"),e=e(),(0,o.Cn)(),e),r={class:"pt-32 pb-64"},n={class:"grid grid-cols-12 w-full"},d={class:"app-frame"},c={class:"px-3"},p=l((()=>(0,o._)("p",{class:"text-xl"},"My Proposals",-1))),i=l((()=>(0,o._)("p",{class:"text-sm mt-3"},"No proposals currently submitted.",-1))),u=l((()=>(0,o._)("p",{class:"mt-24 text-xl"},"All Proposals",-1))),f={class:"mt-3"},m={key:0,class:"text-sm mt-3"},h={class:"col-span-8"},y={class:"capitalize"},v={class:"col-span-4 flex items-center justify-end text-sm"},w=(0,o.Uk)("View Proposal ");function b(e,s,t,l,b,g){const _=(0,o.up)("AppCountdown"),A=(0,o.up)("AppButton"),k=(0,o.up)("router-link"),x=(0,o.up)("AppShell");return(0,o.wg)(),(0,o.j4)(x,{colors:b.colors,isLoaded:b.loaded,protected:!0,class:"font-haffer"},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o._)("div",n,[(0,o._)("div",d,[(0,o._)("div",c,[p,i,u,(0,o._)("div",f,[b.proposals.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",m," No proposals currently submitted. ")),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(b.proposals,((e,s)=>((0,o.wg)(),(0,o.iD)("div",{key:s,class:"border-b border-black py-3 grid grid-cols-12"},[(0,o._)("div",h,[(0,o._)("b",y,(0,a.zw)(e.contentType),1),(0,o.Uk)(" "+(0,a.zw)(e.id)+" ",1),(0,o.Wm)(_,{start:e.createdAt},null,8,["start"])]),(0,o._)("div",v,[(0,o.Wm)(k,{to:"/governance/"+e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{class:"flex items-center"},{default:(0,o.w5)((()=>[w])),_:1})])),_:2},1032,["to"])])])))),128))])])])])])])),_:1},8,["colors","isLoaded"])}var g=t(9669),_=t.n(g),A=t(3243),k=t(533),x=t(7175),P={components:{AppShell:k.Z,AppCountdown:A.Z,AppButton:x.Z},data(){return{colors:["white","black"],proposals:[],weights:[],types:["collect","invest","propose","sell","transfer","onboard"],loaded:!1}},computed:{walletAddress(){return this.$store.state.walletAddress}},methods:{async getWeights(){try{const e=await _().get("https://salon-node.salondao.xyz/members?cache=true");this.weights=e.data}catch(e){console.log("error",e)}},getFieldLabel(e,s){for(let t of e)if(t.id==s)return t.name},async assembleProposalType(e){var s=["https://salon-node.salondao.xyz/type/"+e+"?cache=true","https://salon-node.salondao.xyz/form/"+e+"?cache=true"],t=this;try{var o=[],a=await Promise.all(s.map((e=>_().get(e))));for(const e of Object.values(a[0].data.message.items)){var l={votes:[]};"votes"in e.fields&&(l=e.fields.votes,delete e.fields.votes);var r=await Object.entries(e.fields).map((function(e){var s=t.getFieldLabel(a[1].data.fields,e[0]);return{label:s,value:e[1]}})),n={id:e.sys.id,createdAt:e.sys.createdAt,contentType:e.sys.contentType.sys.id,votes:l,fields:r};o.push(n)}return o}catch(d){return console.error(d),[]}}},async beforeMount(){console.log("proposals load!");var e=await Promise.all(this.types.map((e=>this.assembleProposalType(e))));this.proposals=e.flat(),await this.getWeights(),this.loaded=!0,console.log("loaded!"),console.log(this.proposals)}},Z=t(3744);const z=(0,Z.Z)(P,[["render",b],["__scopeId","data-v-4ecffbbc"]]);var S=z},6061:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var o=t(6252);function a(e,s,t,a,l,r){const n=(0,o.up)("FormProposal"),d=(0,o.up)("AppShell");return(0,o.wg)(),(0,o.j4)(d,{colors:l.colors,isLoaded:!0,protected:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{id:e.$route.params.id,onReady:r.ready},null,8,["id","onReady"])])),_:1},8,["colors"])}var l=t(533),r=t(8627),n={components:{AppShell:l.Z,FormProposal:r.Z},data(){return{colors:["white","black"],isReady:!1}},methods:{ready(){this.isReady=!0}}},d=t(3744);const c=(0,d.Z)(n,[["render",a]]);var p=c}}]);
//# sourceMappingURL=ViewGovernance.b9c4424a.js.map