"use strict";(self["webpackChunkSalon"]=self["webpackChunkSalon"]||[]).push([[563],{8643:function(e,s,t){t.r(s),t.d(s,{default:function(){return F}});var o=t(6252);const l=e=>((0,o.dD)("data-v-7d031c46"),e=e(),(0,o.Cn)(),e),a={class:"pt-32 pb-64"},r={class:"grid grid-cols-12 w-full"},i={class:"app-frame"},n={class:"px-3"},p=l((()=>(0,o._)("p",{class:"text-xl"},"My Proposals",-1))),d={key:0,class:"text-sm mt-3"},c=l((()=>(0,o._)("p",{class:"mt-24 text-xl"},"Active Proposals",-1))),u={class:"mt-3"},m={key:0,class:"text-sm mt-3"},f=l((()=>(0,o._)("p",{class:"mt-24 text-xl"},"Closed Proposals",-1))),h={class:"mt-3"},v={key:0,class:"text-sm mt-3"};function w(e,s,t,l,w,y){const g=(0,o.up)("ListProposalItem"),k=(0,o.up)("AppShell");return(0,o.wg)(),(0,o.j4)(k,{colors:w.colors,isLoaded:w.loaded,protected:!0,class:"font-haffer"},{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o._)("div",r,[(0,o._)("div",i,[(0,o._)("div",n,[p,y.myProposals.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",d,"No proposals.")),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(y.myProposals,((e,s)=>((0,o.wg)(),(0,o.j4)(g,{key:s,item:e},null,8,["item"])))),128)),c,(0,o._)("div",u,[y.activeProposals.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",m," No proposals. ")),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(y.activeProposals,((e,s)=>((0,o.wg)(),(0,o.j4)(g,{key:s,item:e},null,8,["item"])))),128))]),f,(0,o._)("div",h,[y.closedProposals.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",v," No proposals. ")),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(y.closedProposals,((e,s)=>((0,o.wg)(),(0,o.j4)(g,{key:s,item:e},null,8,["item"])))),128))])])])])])])),_:1},8,["colors","isLoaded"])}var y=t(9669),g=t.n(y),k=t(533),P=t(3577);const b={class:"border-b border-black py-3 grid grid-cols-12"},_={class:"col-span-8"},x={class:"capitalize"},A={class:"col-span-4 flex items-center justify-end text-sm"},j=(0,o.Uk)("View Proposal ");function D(e,s,t,l,a,r){const i=(0,o.up)("AppCountdown"),n=(0,o.up)("AppButton"),p=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("div",_,[(0,o._)("b",x,(0,P.zw)(t.item.contentType),1),(0,o.Uk)(" "+(0,P.zw)(t.item.profile.firstName)+" "+(0,P.zw)(t.item.profile.lastName)+" ",1),(0,o.Wm)(i,{start:t.item.createdAt},null,8,["start"])]),(0,o._)("div",A,[(0,o.Wm)(p,{to:"/governance/"+t.item.id},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{class:"flex items-center"},{default:(0,o.w5)((()=>[j])),_:1})])),_:1},8,["to"])])])}var Z=t(7175),z=t(8114),L={components:{AppButton:Z.Z,AppCountdown:z.Z},props:["item"]},C=t(3744);const S=(0,C.Z)(L,[["render",D]]);var W=S,N={components:{AppShell:k.Z,ListProposalItem:W},data(){return{colors:["white","black"],proposals:[],weights:[],types:["collect","invest","propose","sell","transfer","onboard","kick"],loaded:!1}},computed:{walletAddress(){return this.$store.state.walletAddress},myProposals(){return this.proposals.filter((e=>e.profile.walletAddress==this.walletAddress))},activeProposals(){return this.proposals.filter((e=>!("passed"in e.votes)))},closedProposals(){return this.proposals.filter((e=>"passed"in e.votes))}},methods:{async getWeights(){try{const e=await g().get("https://salon-node.salondao.xyz/members?cache=true");this.weights=e.data}catch(e){console.log("error",e)}},getFieldLabel(e,s){for(let t of e)if(t.id==s)return t.name},async assembleProposalType(e){var s=["https://salon-node.salondao.xyz/type/"+e+"?cache=true","https://salon-node.salondao.xyz/form/"+e+"?cache=true"],t=this;try{var o=[],l=await Promise.all(s.map((e=>g().get(e))));for(const e of Object.values(l[0].data.message.items)){var a={votes:[]};"votes"in e.fields&&(a=e.fields.votes,delete e.fields.votes);var r=await Object.entries(e.fields).map((function(e){var s=t.getFieldLabel(l[1].data.fields,e[0]);return{label:s,value:e[1]}})),i={id:e.sys.id,profile:e.fields.profile,createdAt:e.sys.createdAt,contentType:e.sys.contentType.sys.id,votes:a,fields:r};o.push(i)}return o}catch(n){return console.error(n),[]}}},async beforeMount(){console.log("proposals load!");var e=await Promise.all(this.types.map((e=>this.assembleProposalType(e))));this.proposals=e.flat(),await this.getWeights(),this.loaded=!0,console.log("loaded!")}};const T=(0,C.Z)(N,[["render",w],["__scopeId","data-v-7d031c46"]]);var F=T},6061:function(e,s,t){t.r(s),t.d(s,{default:function(){return d}});var o=t(6252);function l(e,s,t,l,a,r){const i=(0,o.up)("FormProposal"),n=(0,o.up)("AppShell");return(0,o.wg)(),(0,o.j4)(n,{colors:a.colors,isLoaded:!0,protected:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{id:e.$route.params.id,onReady:r.ready},null,8,["id","onReady"])])),_:1},8,["colors"])}var a=t(533),r=t(3249),i={components:{AppShell:a.Z,FormProposal:r.Z},data(){return{colors:["white","black"],isReady:!1}},methods:{ready(){this.isReady=!0}}},n=t(3744);const p=(0,n.Z)(i,[["render",l]]);var d=p}}]);
//# sourceMappingURL=ViewGovernance.9a5dc23f.js.map