{"version":3,"file":"js/ViewGovernance.55c71082.js","mappings":"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","sources":["webpack://Salon/./src/views/ViewGovernance.vue","webpack://Salon/./src/components/ListGovernance.vue","webpack://Salon/./src/components/ButtonYes.vue","webpack://Salon/./src/components/ButtonYes.vue?4606","webpack://Salon/./src/components/ButtonNo.vue","webpack://Salon/./src/components/ButtonNo.vue?a0bb","webpack://Salon/./src/components/CounterVote.vue","webpack://Salon/./src/components/CounterVote.vue?dad4","webpack://Salon/./src/components/ListGovernance.vue?0dc7","webpack://Salon/./src/views/ViewGovernance.vue?2954"],"sourcesContent":["<template>\n  <AppShell\n    :backgroundClass=\"'bg-white'\"\n    :textClass=\"'text-lilac'\"\n    :fillClass=\"'fill-lilac'\"\n    ><AppContent><ListGovernance class=\"mt-16\" /></AppContent\n  ></AppShell>\n</template>\n\n<script>\n// @ is an alias to /src\nimport AppShell from \"@/components/AppShell\";\nimport AppContent from \"@/components/AppContent\";\nimport ListGovernance from \"@/components/ListGovernance\";\nexport default {\n  components: { AppShell, ListGovernance, AppContent },\n};\n</script>\n","<template>\n  <div class=\"grid grid-cols-12 w-full\">\n    <div class=\"col-span-12\">\n      <div\n        class=\"border-b mb-6 p-4 w-full grid grid-cols-12\"\n        v-for=\"(p, index) in proposals\"\n        :key=\"index\"\n      >\n        <div class=\"col-span-4\">\n          <p class=\"text-3xl mb-8\">\n            {{ p.fields.proposalType[\"en-US\"][0] }} #{{ p.sys.id }}\n          </p>\n          <p>{{ p }}</p>\n        </div>\n        <div class=\"col-span-4 flex justify-center\">\n          <div>\n            <ButtonYes :id=\"p.sys.id\" :votes=\"p.fields.votes\" />\n            <ButtonNo :id=\"p.sys.id\" :votes=\"p.fields.votes\" />\n          </div>\n        </div>\n        <div class=\"col-span-4\">\n          <CounterVote :votes=\"p.fields.votes\" />\n          <button @click=\"execute(p.sys.id)\" class=\"mt-2 text-pink flex\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              class=\"h-6 w-6 mr-1\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                d=\"M17 8l4 4m0 0l-4 4m4-4H3\"\n              />\n            </svg>\n            Execute\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport ButtonYes from \"@/components/ButtonYes\";\nimport ButtonNo from \"@/components/ButtonNo\";\nimport CounterVote from \"@/components/CounterVote\";\nexport default {\n  components: { ButtonYes, ButtonNo, CounterVote },\n  data() {\n    return { proposals: [] };\n  },\n  methods: {\n    async execute(id) {\n      console.log(\"execute!\");\n      try {\n        const res = await axios.post(\n          \"https://salontest-terrifickid.cloud.okteto.net/execute\",\n          {\n            id: id,\n          }\n        );\n        console.log(\"executed!\", res.data);\n      } catch (error) {\n        console.log(\"error\", error);\n      }\n    },\n  },\n  async beforeMount() {\n    console.log(\"GLOad!\");\n    try {\n      const res = await axios.get(\n        \"https://salontest-terrifickid.cloud.okteto.net/governance\"\n      );\n      this.proposals = res.data;\n    } catch (error) {\n      console.log(\"error\", error);\n    }\n  },\n};\n</script>\n","<template>\n  <button\n    @click=\"yes()\"\n    :disabled=\"processing\"\n    class=\"mx-auto mt-3 bg-lilac text-white rounded px-4 py-3 text-xl shadow-sm op flex items-center w-32 justify-center\"\n  >\n    Yes\n    <svg\n      v-if=\"voted\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      class=\"h-6 w-6 ml-1\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      stroke=\"currentColor\"\n      stroke-width=\"2\"\n    >\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n    </svg>\n  </button>\n</template>\n<script>\nimport axios from \"axios\";\nexport default {\n  props: [\"id\", \"votes\"],\n  computed: {\n    profile() {\n      return this.$store.state.profile;\n    },\n    walletAddress() {\n      return this.$store.state.walletAddress;\n    },\n    voted() {\n      if (!this.votes) return false;\n      var voted = false;\n      if (\"en-US\" in this.votes) {\n        this.votes[\"en-US\"].votes.forEach((vote) => {\n          if (vote.address == this.walletAddress && vote.vote) voted = true;\n        });\n      }\n      return voted;\n    },\n  },\n  methods: {\n    async yes() {\n      const vote = JSON.stringify({\n        address: this.walletAddress,\n        vote: true,\n        proposal: this.id,\n      });\n\n      //Sign Message and Vote\n      try {\n        const signature = await this.$store.state.signer.signMessage(vote);\n        console.log(\"Sending Vote!\");\n        const res = await axios.post(\n          \"https://salontest-terrifickid.cloud.okteto.net/vote\",\n          {\n            address: this.walletAddress,\n            vote: vote,\n            signature: signature,\n          }\n        );\n        console.log(res.data);\n        location.reload();\n      } catch (err) {\n        console.log(err);\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./ButtonYes.vue?vue&type=template&id=16933da3\"\nimport script from \"./ButtonYes.vue?vue&type=script&lang=js\"\nexport * from \"./ButtonYes.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/tk/oz.salon.dapp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button\n    @click=\"no()\"\n    class=\"mx-auto mt-3 bg-lilac text-white rounded px-4 py-3 text-xl shadow-sm op flex items-center w-32 justify-center\"\n  >\n    No\n    <svg\n      v-if=\"voted\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      class=\"h-6 w-6 ml-1\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      stroke=\"currentColor\"\n      stroke-width=\"2\"\n    >\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n    </svg>\n  </button>\n</template>\n<script>\nimport axios from \"axios\";\nexport default {\n  props: [\"id\", \"votes\"],\n  computed: {\n    voted() {\n      if (!this.votes) return false;\n      var voted = false;\n      if (\"en-US\" in this.votes) {\n        this.votes[\"en-US\"].votes.forEach((vote) => {\n          if (vote.address == this.$store.state.userAddress && !vote.vote)\n            voted = true;\n        });\n      }\n      return voted;\n    },\n  },\n  methods: {\n    async no() {\n      const vote = JSON.stringify({\n        address: this.$store.state.userAddress,\n        vote: false,\n        proposal: this.id,\n      });\n\n      //Sign Message and Vote\n      try {\n        const signature = await this.$store.state.signer.signMessage(vote);\n        console.log(\"Sending Vote!\");\n        const res = await axios.post(\n          \"https://salontest-terrifickid.cloud.okteto.net/vote\",\n          {\n            address: this.$store.state.userAddress,\n            vote: vote,\n            signature: signature,\n          }\n        );\n        console.log(res.data);\n        location.reload();\n      } catch (err) {\n        console.log(err);\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./ButtonNo.vue?vue&type=template&id=ed85a176\"\nimport script from \"./ButtonNo.vue?vue&type=script&lang=js\"\nexport * from \"./ButtonNo.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/tk/oz.salon.dapp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div>\n    <div>Total Votes: {{ total }}</div>\n    <div>Yes: {{ yesTotal }}</div>\n    <div>No: {{ noTotal }}</div>\n  </div>\n</template>\n<script>\nexport default {\n  props: [\"votes\"],\n  computed: {\n    total() {\n      return this.votes[\"en-US\"].votes.length;\n    },\n    yesTotal() {\n      return this.votes[\"en-US\"].votes.filter((vote) => {\n        if (vote.vote) return true;\n      }).length;\n    },\n    noTotal() {\n      return this.votes[\"en-US\"].votes.filter((vote) => {\n        if (!vote.vote) return true;\n      }).length;\n    },\n  },\n};\n</script>\n","import { render } from \"./CounterVote.vue?vue&type=template&id=79630e62\"\nimport script from \"./CounterVote.vue?vue&type=script&lang=js\"\nexport * from \"./CounterVote.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/tk/oz.salon.dapp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ListGovernance.vue?vue&type=template&id=62d02a6c\"\nimport script from \"./ListGovernance.vue?vue&type=script&lang=js\"\nexport * from \"./ListGovernance.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/tk/oz.salon.dapp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ViewGovernance.vue?vue&type=template&id=3696c758\"\nimport script from \"./ViewGovernance.vue?vue&type=script&lang=js\"\nexport * from \"./ViewGovernance.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/tk/oz.salon.dapp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["backgroundClass","textClass","fillClass","class","xmlns","fill","viewBox","stroke","d","proposals","p","index","key","fields","proposalType","sys","id","votes","execute","yes","disabled","processing","props","computed","profile","this","$store","state","walletAddress","voted","forEach","vote","address","methods","async","JSON","stringify","proposal","signature","signer","signMessage","console","log","res","data","location","reload","err","__exports__","no","userAddress","total","yesTotal","noTotal","length","filter","components","ButtonYes","ButtonNo","CounterVote","error","AppShell","ListGovernance","AppContent","render"],"sourceRoot":""}